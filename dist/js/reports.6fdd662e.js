(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["reports"],{"542b":function(t,e,i){"use strict";var a=i("fd6c"),n=i.n(a);n.a},ca2c:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"punish"},[i("div",{staticClass:"table_title"},[i("div",[t.isShow?i("el-button",{staticClass:"el-icon-d-arrow-left",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.back()}}},[t._v("返回")]):t._e()],1),i("div",{staticClass:"search_wrap"},[i("el-date-picker",{attrs:{"value-format":"timestamp",size:"small",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.times,callback:function(e){t.times=e},expression:"times"}}),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:t.search}},[t._v("搜索")])],1)]),i("div",{staticClass:"content"},[i("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.tabClick},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.tabList,function(e,a){return i("el-tab-pane",{key:a,attrs:{label:e.label,name:e.name}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],key:Math.random(),staticStyle:{width:"100%"},attrs:{data:t.dataList.list,stripe:"",border:""}},[i("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),i("el-table-column",{attrs:{prop:"user_name",label:"投诉人",align:"center"}}),i("el-table-column",{attrs:{prop:"label",label:"投诉对象类型",align:"center"}}),i("el-table-column",{attrs:{prop:"object_info",label:"投诉内容",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticClass:"mini-button",attrs:{size:"mini",type:"success",icon:"iconfont examine",title:"点击查看投诉内容"},on:{click:function(i){t.openObjectDialog=!0,t.object_info=e.row.object_info}}},[t._v("查看")])]}}],null,!0)}),i("el-table-column",{attrs:{prop:"reason",label:"投诉原因",align:"center"}}),i("el-table-column",{attrs:{prop:"info",label:"投诉备注",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticClass:"mini-button",attrs:{size:"mini",type:"warning",icon:"iconfont zixun",title:"点击查看备注内容"},on:{click:function(i){return t.getInfo(e.row.info,"info")}}},[t._v("查看")])]}}],null,!0)}),i("el-table-column",{attrs:{prop:"times",label:"投诉时间",align:"center"}}),"1"==t.status?i("el-table-column",{attrs:{prop:"reply_name",label:"回复人",align:"center"}}):t._e(),"1"==t.status?i("el-table-column",{attrs:{prop:"reply",label:"官方回复",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticClass:"mini-button",attrs:{size:"mini",type:"primary",icon:"el-icon-view",title:"点击查看回复内容"},on:{click:function(i){return t.getInfo(e.row.reply,"reply")}}},[t._v("查看")])]}}],null,!0)}):t._e(),"1"==t.status?i("el-table-column",{attrs:{prop:"reply_time",label:"回复时间",align:"center"}}):t._e(),i("el-table-column",{attrs:{prop:"",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"cz_btn"},["1"==t.status?i("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(i){return t.del(e.row.id)}}},[t._v("删除")]):t._e(),1!=t.status?i("el-button",{staticClass:"mini-button",attrs:{type:"primary",size:"mini",icon:"el-icon-edit-outline",title:"点我对该条信息进行回复"},on:{click:function(i){return t.openCheck(e.row)}}},[t._v("点击回复")]):t._e()],1)]}}],null,!0)})],1)],1)}),1),i("el-pagination",{attrs:{background:"","current-page":t.page,"page-sizes":[10,20,50,100],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.dataList.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),i("el-dialog",{attrs:{title:"投诉内容",visible:t.openObjectDialog,width:"800px",top:"20px"},on:{"update:visible":function(e){t.openObjectDialog=e}}},[i("div",{staticClass:"expand_wrap"},[i("p",[i("span",[t._v("用户头像:")]),i("img",{staticClass:"avatar",attrs:{src:t.object_info.avatar}})]),i("p",[i("span",[t._v("用户姓名:")]),t._v("\n        "+t._s(t.object_info.username)+"\n      ")]),i("p",[i("span",[t._v("需求内容:")]),t._v("\n        "+t._s(t.object_info.info)+"\n      ")])]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.openObjectDialog=!1}}},[t._v("关闭")])],1)]),i("el-dialog",{attrs:{title:"info"==t.type?"查看备注":"查看回复",visible:t.infoDialog,width:"800px",top:"20px"},on:{"update:visible":function(e){t.infoDialog=e}}},[i("div",{domProps:{innerHTML:t._s(t.info)}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.infoDialog=!1}}},[t._v("关闭")])],1)]),i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"回复",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e},close:function(e){t.form.reply=""}}},[i("el-input",{staticStyle:{"margin-top":"20px"},attrs:{type:"textarea",rows:2,placeholder:"请输入回复信息"},model:{value:t.form.reply,callback:function(e){t.$set(t.form,"reply",e)},expression:"form.reply"}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.sure}},[t._v("确 定")])],1)],1)],1)},n=[],s=(i("7f7f"),{data:function(){return{loading:!1,isShow:!1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-6048e5),t.$emit("pick",[i,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-2592e6),t.$emit("pick",[i,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-7776e6),t.$emit("pick",[i,e])}}]},dataList:[],page:1,limit:10,times:"",tabList:[{label:"未回复",name:"0"},{label:"已回复",name:"1"}],status:"0",form:{id:"",uid:"",object_id:"",reply:""},dialogVisible:!1,infoDialog:!1,info:"",type:"",openObjectDialog:!1,object_info:[]}},watch:{pass:function(t,e){"1"==t&&(this.remark="")}},methods:{getInfo:function(t,e){this.info=t,this.type=e,this.infoDialog=!0},openCheck:function(t){this.dialogVisible=!0,this.form.id=t.id,this.form.uid=t.uid,this.form.object_id=t.object_id,this.formreply=""},getDataList:function(){var t=this;this.loading=!0,this.$api.getReportsList({page:this.page,limit:this.limit,status:this.status,times:this.times}).then(function(e){t.dataList=e.data||[],e.code&&t.$message[e.code?"warning":"success"](e.data),t.loading=!1})},handleSizeChange:function(t){this.page=t,this.getDataList()},handleCurrentChange:function(t){this.limit=t,this.getDataList()},tabClick:function(t){this.status=t.name,this.page=1,this.getDataList()},search:function(){this.page=1,this.getDataList(),this.isShow=!0},back:function(){this.page=1,this.limit=10,this.status="0",this.times="",this.getDataList(),this.isShow=!1},del:function(t){var e=this;this.$confirm("是否确认删除该项","提示",{type:"warning"}).then(function(){e.$api.delPunish({id:t}).then(function(t){e.addEditDialog=!!t.code,e.$message[t.code?"danger":"success"](t.data.message),e.page=e.$options.filters.pagination(e.page,e.limit,e.dataList.total),e.getDataList()})}).catch(function(){e.$message.info("已取消删除")})},sure:function(){var t=this;this.loading=!0,this.$api.setReply(this.form).then(function(e){t.loading=!1,t.$message[e.code?"warning":"success"](e.data.message),t.dialogVisible=!1,t.getDataList()})}},created:function(){this.getDataList()}}),o=s,l=(i("542b"),i("2877")),r=Object(l["a"])(o,a,n,!1,null,"d2815e42",null);e["default"]=r.exports},fd6c:function(t,e,i){}}]);
//# sourceMappingURL=reports.6fdd662e.js.map