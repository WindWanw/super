{"version":3,"sources":["webpack:///./src/views/ad.vue?e937","webpack:///src/views/ad.vue","webpack:///./src/views/ad.vue?eff8","webpack:///./src/views/ad.vue","webpack:///./src/views/ad.vue?ca4a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","type","size","icon","on","click","$event","openAddEditDialog","_v","data","dataList","list","stripe","border","prop","label","width","scopedSlots","_u","key","fn","scope","_s","row","ads","title","url","src","pic","_e","_f","begin","timeout","del","id","background","current-page","page","page-sizes","page-size","limit","layout","total","size-change","handleSizeChange","current-change","handleCurrentChange","top","form","visible","AddEditDialog","update:visible","close","$refs","resetFields","ref","status-icon","model","rules","label-width","value","callback","$$v","$set","expression","options","cityData","change-on-select","placeholder","selectCity","staticStyle","margin-left","city","action","axios","defaults","accept","before-upload","beforeUp1","show-file-list","on-success","upSuc1","value-format","align","unlink-panels","range-separator","start-placeholder","end-placeholder","slot","addEdit","staticRenderFns","advue_type_script_lang_js_","times","required","message","trigger","components","upload","methods","val","getDataList","_this","$api","getAdList","then","res","item","i","date","file","$message","warning","fileList","console","log","code","host","name","_this2","that","length","ruleForm","validate","valid","_this3","$confirm","delAd","$options","filters","pagination","catch","info","created","views_advue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ad_vue_vue_type_style_index_0_id_fc5cb438_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ad_vue_vue_type_style_index_0_id_fc5cb438_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"6GAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,MAAiB,CAAAF,EAAA,OAAYE,YAAA,eAA0B,CAAAF,EAAA,aAAkBG,MAAA,CAAOC,KAAA,UAAAC,KAAA,QAAAC,KAAA,gBAAsDC,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAAb,EAAAc,kBAAA,UAAsC,CAAAd,EAAAe,GAAA,cAAAX,EAAA,OAAiCE,YAAA,WAAsB,CAAAF,EAAA,YAAiBG,MAAA,CAAOS,KAAAhB,EAAAiB,SAAAC,KAAAC,OAAA,GAAAC,OAAA,KAAkD,CAAAhB,EAAA,mBAAwBG,MAAA,CAAOc,KAAA,OAAAC,MAAA,QAA4BlB,EAAA,mBAAwBG,MAAA,CAAOc,KAAA,MAAAC,MAAA,OAAAC,MAAA,SAA4CC,YAAAxB,EAAAyB,GAAA,EAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAAxB,EAAA,OAAAA,EAAA,QAAAJ,EAAAe,GAAA,SAAAf,EAAAe,GAAAf,EAAA6B,GAAAD,EAAAE,IAAAC,IAAAC,UAAA5B,EAAA,OAAAA,EAAA,QAAAJ,EAAAe,GAAA,SAAAf,EAAAe,GAAAf,EAAA6B,GAAAD,EAAAE,IAAAC,IAAAE,QAAAL,EAAAE,IAAAC,IAAA,IAAA3B,EAAA,OAA0LE,YAAA,SAAAC,MAAA,CAA4B2B,IAAAN,EAAAE,IAAAC,IAAAI,OAAyBnC,EAAAoC,YAAgBhC,EAAA,mBAAwBG,MAAA,CAAOc,KAAA,OAAAC,MAAA,QAA4BlB,EAAA,mBAAwBG,MAAA,CAAOc,KAAA,QAAAC,MAAA,SAA8BlB,EAAA,mBAAwBG,MAAA,CAAOc,KAAA,UAAAC,MAAA,SAAgClB,EAAA,mBAAwBG,MAAA,CAAOc,KAAA,QAAAC,MAAA,OAAAC,MAAA,SAA8CC,YAAAxB,EAAAyB,GAAA,EAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAA5B,EAAAe,GAAAf,EAAA6B,GAAA7B,EAAAqC,GAAA,kBAAArC,CAAA4B,EAAAE,IAAAQ,gBAAwElC,EAAA,mBAAwBG,MAAA,CAAOc,KAAA,UAAAC,MAAA,OAAAC,MAAA,SAAgDC,YAAAxB,EAAAyB,GAAA,EAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAA5B,EAAAe,GAAAf,EAAA6B,GAAA7B,EAAAqC,GAAA,kBAAArC,CAAA4B,EAAAE,IAAAS,kBAA0EnC,EAAA,mBAAwBG,MAAA,CAAOc,KAAA,GAAAC,MAAA,KAAAC,MAAA,SAAuCC,YAAAxB,EAAAyB,GAAA,EAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAAxB,EAAA,OAAkBE,YAAA,UAAqB,CAAAF,EAAA,aAAkBG,MAAA,CAAOC,KAAA,UAAAC,KAAA,OAAAC,KAAA,gBAAqDC,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAAb,EAAAc,kBAAA,OAAAc,EAAAE,QAAiD,CAAA9B,EAAAe,GAAA,QAAAX,EAAA,aAAiCG,MAAA,CAAOC,KAAA,SAAAC,KAAA,OAAAC,KAAA,kBAAsDC,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAAb,EAAAwC,IAAAZ,EAAAE,IAAAW,OAA+B,CAAAzC,EAAAe,GAAA,oBAA0B,GAAAX,EAAA,iBAA0BG,MAAA,CAAOmC,WAAA,GAAAC,eAAA3C,EAAA4C,KAAAC,aAAA,eAAAC,YAAA9C,EAAA+C,MAAAC,OAAA,0CAAAC,MAAAjD,EAAAiB,SAAAgC,OAA2KtC,GAAA,CAAKuC,cAAAlD,EAAAmD,iBAAAC,iBAAApD,EAAAqD,wBAA6E,GAAAjD,EAAA,aAAsBG,MAAA,CAAO+C,IAAA,OAAAtB,MAAAhC,EAAAuD,KAAAd,GAAA,UAAAe,QAAAxD,EAAAyD,cAAAlC,MAAA,SAAuFZ,GAAA,CAAK+C,iBAAA,SAAA7C,GAAkCb,EAAAyD,cAAA5C,GAAyB8C,MAAA,SAAA9C,GAA0B,OAAAb,EAAA4D,MAAA,YAAAC,iBAA6C,CAAAzD,EAAA,WAAgB0D,IAAA,WAAAvD,MAAA,CAAsBwD,cAAA,GAAAC,MAAAhE,EAAAuD,KAAAU,MAAAjE,EAAAiE,MAAAC,cAAA,UAA2E,CAAA9D,EAAA,gBAAqBG,MAAA,CAAOe,MAAA,MAAAD,KAAA,SAA6B,CAAAjB,EAAA,YAAiB4D,MAAA,CAAOG,MAAAnE,EAAAuD,KAAA,KAAAa,SAAA,SAAAC,GAA+CrE,EAAAsE,KAAAtE,EAAAuD,KAAA,OAAAc,IAAgCE,WAAA,gBAAyB,GAAAnE,EAAA,gBAAyBG,MAAA,CAAOe,MAAA,OAAc,CAAAlB,EAAA,eAAoBG,MAAA,CAAOiE,QAAAxE,EAAAyE,SAAAC,mBAAA,GAAAC,YAAA3E,EAAAuD,KAAAd,GAAA,cAAoFuB,MAAA,CAAQG,MAAAnE,EAAA,WAAAoE,SAAA,SAAAC,GAAgDrE,EAAA4E,WAAAP,GAAmBE,WAAA,gBAA0BvE,EAAAuD,KAAA,GAAAnD,EAAA,QAA2ByE,YAAA,CAAaC,cAAA,SAAsB,CAAA9E,EAAAe,GAAA,QAAAf,EAAA6B,GAAA7B,EAAA+E,SAAA/E,EAAAoC,MAAA,GAAAhC,EAAA,gBAAqEG,MAAA,CAAOe,MAAA,SAAgB,CAAAlB,EAAA,YAAiB4D,MAAA,CAAOG,MAAAnE,EAAAuD,KAAA,IAAAa,SAAA,SAAAC,GAA8CrE,EAAAsE,KAAAtE,EAAAuD,KAAA,MAAAc,IAA+BE,WAAA,eAAwB,GAAAnE,EAAA,gBAAyBG,MAAA,CAAOe,MAAA,OAAAD,KAAArB,EAAAuD,KAAApB,IAAA,aAA+C,CAAA/B,EAAA,YAAiB4D,MAAA,CAAOG,MAAAnE,EAAAuD,KAAA,MAAAa,SAAA,SAAAC,GAAgDrE,EAAAsE,KAAAtE,EAAAuD,KAAA,QAAAc,IAAiCE,WAAA,iBAA0B,GAAAnE,EAAA,gBAAyBG,MAAA,CAAOe,MAAA,OAAAD,KAAArB,EAAAuD,KAAAvB,MAAA,WAA+C,CAAA5B,EAAA,aAAkBG,MAAA,CAAOyE,OAAAhF,EAAAiF,MAAAC,SAAA,6CAAAC,OAAA,8CAAAC,gBAAApF,EAAAqF,UAAAC,kBAAA,EAAAC,aAAAvF,EAAAwF,SAAoN,CAAApF,EAAA,aAAkBG,MAAA,CAAOE,KAAA,QAAAD,KAAA,YAAiC,CAAAR,EAAAe,GAAA,cAAAf,EAAAuD,KAAA,IAAAnD,EAAA,OAAgDE,YAAA,SAAAC,MAAA,CAA4B2B,IAAAlC,EAAAuD,KAAApB,OAAoBnC,EAAAoC,MAAA,GAAAhC,EAAA,gBAAkCG,MAAA,CAAOe,MAAA,QAAAD,KAAA,UAAgC,CAAAjB,EAAA,kBAAuBG,MAAA,CAAOkF,eAAA,YAAAhF,KAAA,QAAAD,KAAA,YAAAkF,MAAA,QAAAC,gBAAA,GAAAC,kBAAA,IAAAC,oBAAA,OAAAC,kBAAA,QAA0K9B,MAAA,CAAQG,MAAAnE,EAAAuD,KAAA,MAAAa,SAAA,SAAAC,GAAgDrE,EAAAsE,KAAAtE,EAAAuD,KAAA,QAAAc,IAAiCE,WAAA,iBAA0B,OAAAnE,EAAA,OAAoBE,YAAA,gBAAAC,MAAA,CAAmCwF,KAAA,UAAgBA,KAAA,UAAe,CAAA3F,EAAA,aAAkBO,GAAA,CAAIC,MAAA,SAAAC,GAAyBb,EAAAyD,eAAA,KAA4B,CAAAzD,EAAAe,GAAA,SAAAX,EAAA,aAAkCG,MAAA,CAAOC,KAAA,WAAiBG,GAAA,CAAKC,MAAAZ,EAAAgG,UAAqB,CAAAhG,EAAAe,GAAA,sBACvjJkF,EAAA,uCCiGAC,EAAA,CACAlF,KADA,WAEA,OACAC,SAAA,GACA2B,KAAA,EACAG,MAAA,GACAU,eAAA,EACAgB,SAAAM,EAAA,KACAH,WAAA,GACAG,KAAA,GACAxB,KAAA,CACAX,KAAA,GACAZ,MAAA,GACAC,IAAA,GACAE,IAAA,GACAM,GAAA,GACA0D,MAAA,IAEAlC,MAAA,CACArB,KAAA,CACA,CAAAwD,UAAA,EAAAC,QAAA,SAAAC,QAAA,SAGAtE,MAAA,CACA,CAAAoE,UAAA,EAAAC,QAAA,WAAAC,QAAA,SAEAnE,IAAA,CACA,CAAAiE,UAAA,EAAAC,QAAA,WAAAC,QAAA,SAEAH,MAAA,CACA,CAAAC,UAAA,EAAAC,QAAA,YAAAC,QAAA,YAKAC,WAAA,CACAC,SAAA,MAEAC,QAAA,CAEAtD,iBAFA,SAEAuD,GACAzG,KAAA8C,MAAA2D,EACAzG,KAAA0G,eAGAtD,oBAPA,SAOAqD,GACAzG,KAAA2C,KAAA8D,EACAzG,KAAA0G,eAGAA,YAZA,WAYA,IAAAC,EAAA3G,KACAA,KAAA4G,KAAAC,UAAA,CACAlE,KAAA3C,KAAA2C,KACAG,MAAA9C,KAAA8C,QAEAgE,KAAA,SAAAC,GACAJ,EAAA3F,SAAA+F,EAAAhG,MAAA,MAIAF,kBAtBA,SAsBAN,EAAAyG,GACA,UAAAzG,EAAA,CACA,QAAA0G,KAAAjH,KAAAsD,KACAtD,KAAAsD,KAAA2D,GAAA,GAEAjH,KAAA2E,WAAA,OACA,CACA3E,KAAAsD,KAAAX,KAAAqE,EAAArE,KACA3C,KAAA8E,KAAAkC,EAAAlC,KACA9E,KAAA2E,WAAA,GACA3E,KAAAsD,KAAAvB,MAAAiF,EAAAlF,IAAAC,MACA/B,KAAAsD,KAAAtB,IAAAgF,EAAAlF,IAAAE,IACAhC,KAAAsD,KAAApB,IAAA8E,EAAAlF,IAAAI,IACAlC,KAAAsD,KAAAd,GAAAwE,EAAAxE,GACA,IAAA0E,EAAAF,EAAA3E,MAAA,KAAA2E,EAAA3E,MAAA,IAAA2E,EAAA1E,SAAA,GACAtC,KAAAsD,KAAA4C,MAAAgB,EAEAlH,KAAAwD,eAAA,GAGA4B,UA1CA,SA0CA+B,GACA,GAAAA,EAAA3G,KAAA,QAGA,OADAR,KAAAoH,SAAAC,QAAA,cACA,GAIA9B,OAlDA,SAkDAwB,EAAAI,EAAAG,GACAC,QAAAC,IAAAT,GACAA,EAAAU,OAGAzH,KAAAsD,KAAApB,IAAA6E,EAAAhG,KAAA2G,KAAAX,EAAAhG,KAAA4G,OAIA5B,QA3DA,WA2DA,IAAA6B,EAAA5H,KACA6H,EAAA7H,KACA,IAAAA,KAAAsD,KAAAd,MACAqF,EAAAlD,aAAAkD,EAAAlD,WAAAmD,QAAA,OAAA9H,KAAAoH,SAAAC,QAAA,SAEAQ,EAAAlE,MAAAoE,SAAAC,SAAA,SAAAC,GACA,IAAAA,EAkBA,SAjBA,IAAAnG,EAAA,CAAAC,MAAA8F,EAAAvE,KAAAvB,MAAAG,IAAA2F,EAAAvE,KAAApB,IAAAF,IAAA6F,EAAAvE,KAAAtB,KACA6F,EAAAjB,KAAAiB,EAAAvE,KAAAd,GAAA,mBACAG,KAAAkF,EAAAvE,KAAAX,KACAmC,KAAA+C,EAAAlD,WACAuB,MAAA2B,EAAAvE,KAAA4C,MACApE,MACAU,GAAAqF,EAAAvE,KAAAd,KAEAsE,KAAA,SAAAC,GACAc,EAAArE,gBAAAuD,EAAAU,KACAI,EAAAT,SAAAL,EAAAU,KAAA,mBAAAV,EAAAhG,KAAAqF,SACAyB,EAAAvE,KAAAd,KACAoF,EAAAjF,KAAA,GAEAkF,EAAAnB,mBAQAnE,IAxFA,SAwFAC,GAAA,IAAA0F,EAAAlI,KACAA,KAAAmI,SAAA,iBAAA5H,KAAA,YACAuG,KAAA,WACAoB,EAAAtB,KAAAwB,MAAA,CAAA5F,OACAsE,KAAA,SAAAC,GACAmB,EAAAd,SAAAL,EAAAU,KAAA,mBAAAV,EAAAhG,KAAAqF,SACA8B,EAAAvF,KAAAuF,EAAAG,SAAAC,QAAAC,WAAAL,EAAAvF,KAAAuF,EAAApF,MAAAoF,EAAAlH,SAAAgC,OACAkF,EAAAxB,kBAGA8B,MAAA,WACAN,EAAAd,SAAAqB,KAAA,aAKAC,QA9IA,WA+IA1I,KAAA0G,gBCjP4UiC,EAAA,0BCQ5UC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACA7I,EACAkG,GACF,EACA,KACA,WACA,MAIe+C,EAAA,WAAAH,6CCnBf,IAAAI,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAA8dE,EAAG","file":"js/ad.6aa4b189.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ad\"},[_c('div',{staticClass:\"table_title\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.openAddEditDialog('add')}}},[_vm._v(\"添加广告\")])],1),_c('div',{staticClass:\"content\"},[_c('el-table',{attrs:{\"data\":_vm.dataList.list,\"stripe\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"city\",\"label\":\"城市\"}}),_c('el-table-column',{attrs:{\"prop\":\"ads\",\"label\":\"广告内容\",\"width\":\"250px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('span',[_vm._v(\"标题:\")]),_vm._v(_vm._s(scope.row.ads.title))]),_c('div',[_c('span',[_vm._v(\"链接:\")]),_vm._v(_vm._s(scope.row.ads.url))]),(scope.row.ads.pic)?_c('img',{staticClass:\"ad_img\",attrs:{\"src\":scope.row.ads.pic}}):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"prop\":\"page\",\"label\":\"页面\"}}),_c('el-table-column',{attrs:{\"prop\":\"adder\",\"label\":\"添加人\"}}),_c('el-table-column',{attrs:{\"prop\":\"checker\",\"label\":\"审核人\"}}),_c('el-table-column',{attrs:{\"prop\":\"begin\",\"label\":\"上架时间\",\"width\":\"100px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"formatTimeStamp\")(scope.row.begin)))]}}])}),_c('el-table-column',{attrs:{\"prop\":\"timeout\",\"label\":\"下架时间\",\"width\":\"100px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"formatTimeStamp\")(scope.row.timeout)))]}}])}),_c('el-table-column',{attrs:{\"prop\":\"\",\"label\":\"操作\",\"width\":\"180px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"cz_btn\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.openAddEditDialog('edit',scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.del(scope.row.id)}}},[_vm._v(\"删除\")])],1)]}}])})],1),_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.page,\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.limit,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.dataList.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"top\":\"20px\",\"title\":_vm.form.id?'修改':'添加',\"visible\":_vm.AddEditDialog,\"width\":\"650px\"},on:{\"update:visible\":function($event){_vm.AddEditDialog=$event},\"close\":function($event){return _vm.$refs['ruleForm'].resetFields()}}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"status-icon\":\"\",\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"广告页\",\"prop\":\"page\"}},[_c('el-input',{model:{value:(_vm.form.page),callback:function ($$v) {_vm.$set(_vm.form, \"page\", $$v)},expression:\"form.page\"}})],1),_c('el-form-item',{attrs:{\"label\":\"城市\"}},[_c('el-cascader',{attrs:{\"options\":_vm.cityData,\"change-on-select\":\"\",\"placeholder\":_vm.form.id?'如需修改请选择':''},model:{value:(_vm.selectCity),callback:function ($$v) {_vm.selectCity=$$v},expression:\"selectCity\"}}),(_vm.form.id)?_c('span',{staticStyle:{\"margin-left\":\"20px\"}},[_vm._v(\"当前城市:\"+_vm._s(_vm.city))]):_vm._e()],1),_c('el-form-item',{attrs:{\"label\":\"广告链接\"}},[_c('el-input',{model:{value:(_vm.form.url),callback:function ($$v) {_vm.$set(_vm.form, \"url\", $$v)},expression:\"form.url\"}})],1),_c('el-form-item',{attrs:{\"label\":\"广告标题\",\"prop\":_vm.form.pic?'':'title'}},[_c('el-input',{model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"广告图片\",\"prop\":_vm.form.title?'':'pic'}},[_c('el-upload',{attrs:{\"action\":((_vm.axios.defaults.baseURL) + \"/common/upload/file/adv_upload_dir\"),\"accept\":\"image/jpeg, image/gif, image/png, image/bmp\",\"before-upload\":_vm.beforeUp1,\"show-file-list\":false,\"on-success\":_vm.upSuc1}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1),(_vm.form.pic)?_c('img',{staticClass:\"ad_img\",attrs:{\"src\":_vm.form.pic}}):_vm._e()],1),_c('el-form-item',{attrs:{\"label\":\"上下架时间\",\"prop\":\"times\"}},[_c('el-date-picker',{attrs:{\"value-format\":\"timestamp\",\"size\":\"small\",\"type\":\"daterange\",\"align\":\"right\",\"unlink-panels\":\"\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.form.times),callback:function ($$v) {_vm.$set(_vm.form, \"times\", $$v)},expression:\"form.times\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.AddEditDialog = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addEdit}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n   <div class='ad'>\r\n       <div class=\"table_title\">\r\n         <el-button type=\"primary\" size=\"small\" icon=\"el-icon-plus\" @click=\"openAddEditDialog('add')\">添加广告</el-button>\r\n       </div>\r\n       <div class=\"content\">\r\n         <el-table :data=\"dataList.list\" stripe border>\r\n          <el-table-column prop=\"city\" label=\"城市\"></el-table-column>\r\n          <el-table-column prop=\"ads\" label=\"广告内容\" width=\"250px\">\r\n            <template slot-scope=\"scope\">\r\n              <div><span>标题:</span>{{scope.row.ads.title}}</div>\r\n              <div><span>链接:</span>{{scope.row.ads.url}}</div>\r\n              <img class=\"ad_img\" v-if=\"scope.row.ads.pic\" :src=\"scope.row.ads.pic\">\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"page\" label=\"页面\"></el-table-column>\r\n          <el-table-column prop=\"adder\" label=\"添加人\"></el-table-column>\r\n          <el-table-column prop=\"checker\" label=\"审核人\"></el-table-column>\r\n          <el-table-column prop=\"begin\" label=\"上架时间\" width=\"100px\">\r\n            <template slot-scope=\"scope\">{{scope.row.begin | formatTimeStamp}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"timeout\" label=\"下架时间\" width=\"100px\">\r\n            <template slot-scope=\"scope\">{{scope.row.timeout | formatTimeStamp}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"\" label=\"操作\" width=\"180px\">\r\n              <template slot-scope=\"scope\">\r\n              <div class=\"cz_btn\">\r\n                <el-button @click=\"openAddEditDialog('edit',scope.row)\" type=\"primary\" size=\"mini\" icon=\"el-icon-edit\">编辑</el-button>\r\n                <el-button @click=\"del(scope.row.id)\" type=\"danger\" size=\"mini\" icon=\"el-icon-delete\">删除</el-button>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <el-pagination\r\n          background\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"page\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          :page-size=\"limit\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"dataList.total\">\r\n        </el-pagination>\r\n       </div>\r\n\r\n           <!-- 添加dialog -->\r\n         <el-dialog top=\"20px\" :title=\"form.id?'修改':'添加'\" :visible.sync=\"AddEditDialog\" width=\"650px\" @close=\"$refs['ruleForm'].resetFields()\">\r\n          <el-form status-icon :model=\"form\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\">\r\n            <el-form-item label=\"广告页\" prop=\"page\">\r\n              <el-input v-model=\"form.page\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"城市\">\r\n              <el-cascader :options=\"cityData\" v-model=\"selectCity\" change-on-select :placeholder=\"form.id?'如需修改请选择':''\"></el-cascader>\r\n              <span v-if=\"form.id\" style=\"margin-left:20px\">当前城市:{{city}}</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"广告链接\">\r\n              <el-input v-model=\"form.url\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"广告标题\" :prop=\"form.pic?'':'title'\">\r\n              <el-input v-model=\"form.title\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"广告图片\" :prop=\"form.title?'':'pic'\">\r\n                <el-upload\r\n                  :action=\"`${axios.defaults.baseURL}/common/upload/file/adv_upload_dir`\"\r\n                  accept=\"image/jpeg, image/gif, image/png, image/bmp\"\r\n                  :before-upload=\"beforeUp1\"\r\n                  :show-file-list=\"false\"\r\n                  :on-success=\"upSuc1\"\r\n                >\r\n                  <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n                </el-upload>\r\n                <img v-if=\"form.pic\" class=\"ad_img\" :src=\"form.pic\">\r\n            </el-form-item>\r\n            <el-form-item label=\"上下架时间\" prop=\"times\">\r\n              <el-date-picker\r\n                value-format=\"timestamp\"\r\n                size=\"small\"\r\n                v-model=\"form.times\"\r\n                type=\"daterange\"\r\n                align=\"right\"\r\n                unlink-panels\r\n                range-separator=\"至\"\r\n                start-placeholder=\"开始日期\"\r\n                end-placeholder=\"结束日期\"\r\n              ></el-date-picker>\r\n            </el-form-item>\r\n          </el-form>\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"AddEditDialog = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"addEdit\">确 定</el-button>\r\n          </div>\r\n        </el-dialog>\r\n   </div>\r\n</template>\r\n\r\n<script>\r\nimport citys from '../utils/city.js';\r\nimport upload from '../components/upload';\r\n   export default {\r\n     data () {\r\n       return {\r\n          dataList:[],//数据源\r\n          page:1,//页\r\n          limit:10,//条\r\n          AddEditDialog:false,\r\n          cityData:citys,//城市数据\r\n          selectCity:[],//选择城市\r\n          city:'',\r\n          form:{\r\n              page:'',\r\n              title:'',\r\n              url:'',\r\n              pic:'',\r\n              id:'',\r\n              times:''\r\n          },\r\n          rules:{\r\n            page:[\r\n              { required: true, message: '账号不能为空', trigger: 'blur' }\r\n            ],\r\n            \r\n            title:[\r\n              { required: true, message: '广告标题不能为空', trigger: 'blur' }\r\n            ],\r\n            pic:[\r\n              { required: true, message: '广告图片不能为空', trigger: 'blur' }\r\n            ],\r\n            times:[\r\n              { required: true, message: '上下架时间不能为空', trigger: 'blur' }\r\n            ],\r\n          }\r\n     }\r\n   },\r\n   components: {\r\n     upload\r\n   },\r\n   methods:{\r\n     // 切换limit\r\n     handleSizeChange(val){\r\n       this.limit=val;\r\n       this.getDataList();\r\n     },\r\n    //  切换page\r\n     handleCurrentChange(val){\r\n       this.page=val;\r\n       this.getDataList();\r\n     },\r\n     //获取数据列表\r\n     getDataList(){\r\n       this.$api.getAdList({\r\n         page:this.page,\r\n         limit:this.limit,\r\n       })\r\n       .then(res=>{\r\n         this.dataList=res.data || [];\r\n       })\r\n     },\r\n     //打开添加修改dialog\r\n     openAddEditDialog(type,item){\r\n       if(type=='add'){\r\n         for(let i in this.form){\r\n             this.form[i]=\"\";\r\n         }\r\n         this.selectCity=[];\r\n       }else{\r\n         this.form.page=item.page;\r\n         this.city=item.city;\r\n         this.selectCity = [];\r\n         this.form.title=item.ads.title;\r\n         this.form.url=item.ads.url;\r\n         this.form.pic=item.ads.pic;\r\n         this.form.id=item.id;\r\n         let date=item.begin?[item.begin*1000,item.timeout*1000]:'';\r\n         this.form.times=date;\r\n       }\r\n       this.AddEditDialog=true;\r\n     },\r\n     //上次图片前\r\n    beforeUp1(file) {\r\n      if (file.size > 1024*2 * 1024) {\r\n        // 超出2m  取消上传\r\n        this.$message.warning('图片不能超过2MB')\r\n        return false\r\n      }\r\n    },\r\n    //上传成功后\r\n    upSuc1(res, file, fileList) {\r\n      console.log(res);\r\n      if (res.code) {\r\n        return;\r\n      } else {\r\n        this.form.pic = res.data.host + res.data.name;\r\n      }\r\n    },\r\n     //确认添加或修改\r\n     addEdit(){\r\n       let that=this;\r\n       if(!this.form.id){\r\n        if(!that.selectCity || !that.selectCity.length)return this.$message.warning('请选择城市');\r\n       }\r\n       that.$refs.ruleForm.validate(valid=>{\r\n         if(valid){\r\n          let ads={'title':that.form.title,'pic':that.form.pic,'url':that.form.url};\r\n           that.$api[that.form.id?'editAd':'addAd']({\r\n             page:that.form.page,\r\n             city:that.selectCity,\r\n             times:that.form.times,\r\n             ads,\r\n             id:that.form.id\r\n           })\r\n           .then(res=>{\r\n             that.AddEditDialog=res.code?true:false;\r\n             that.$message[res.code?'error':'success'](res.data.message);\r\n             if(!that.form.id){\r\n               this.page=1;\r\n             }\r\n             that.getDataList();\r\n           })\r\n         }else{\r\n           return false;\r\n         }\r\n       })\r\n     },\r\n     //删除\r\n     del(id){\r\n       this.$confirm('确认删除该项吗?','提示',{type:'warning'})\r\n       .then(()=>{\r\n         this.$api.delAd({id})\r\n         .then(res=>{\r\n           this.$message[res.code?'error':'success'](res.data.message);\r\n           this.page=this.$options.filters.pagination(this.page,this.limit,this.dataList.total);\r\n           this.getDataList();\r\n         })\r\n       })\r\n       .catch(()=>{\r\n         this.$message.info('已取消删除');\r\n       })\r\n     }\r\n   },\r\n   \r\n   created(){\r\n     this.getDataList();\r\n   }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .content{\r\n    background-color: #fff;\r\n    padding: 20px;\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    overflow: auto;\r\n  }\r\n  .avatar{\r\n    width: 30px;\r\n    height: 30px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ad.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ad.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ad.vue?vue&type=template&id=fc5cb438&scoped=true&\"\nimport script from \"./ad.vue?vue&type=script&lang=js&\"\nexport * from \"./ad.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ad.vue?vue&type=style&index=0&id=fc5cb438&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fc5cb438\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ad.vue?vue&type=style&index=0&id=fc5cb438&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ad.vue?vue&type=style&index=0&id=fc5cb438&scoped=true&lang=css&\""],"sourceRoot":""}