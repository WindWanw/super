(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["systenArticle"],{"0dc7":function(t,e,i){"use strict";var a=i("5902"),o=i.n(a);o.a},"173d":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"systemArticle"},[i("div",{staticClass:"table_title"},[i("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(e){return t.openAddEditDialog("add")}}},[t._v("添加文章")]),i("div",{staticClass:"searchText"},[i("el-select",{attrs:{clearable:"",placeholder:"请选择文章类型搜索默认全部",size:"small"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.options,function(t){return i("el-option",{key:t.val,attrs:{label:t.label,value:t.val}})}),1),i("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:t.search}},[t._v("搜索")])],1)],1),i("div",{staticClass:"content"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.dataList.list,stripe:"",border:""}},[i("el-table-column",{attrs:{prop:"type",label:"文章类型"}}),i("el-table-column",{attrs:{prop:"sort",label:"排序"}}),i("el-table-column",{attrs:{prop:"title",label:"文章标题"}}),i("el-table-column",{attrs:{prop:"body",label:"文章内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticClass:"mini-button",attrs:{size:"mini",type:"success"},on:{click:function(i){t.form.body=e.row.body,t.previewDialog=!0}}},[t._v("预览")])]}}])}),i("el-table-column",{attrs:{prop:"times",label:"发布时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n           "+t._s(t._f("formatTimeStamp")(e.row.times,1))+"\n         ")]}}])}),i("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"cz_btn"},[i("el-button",{staticClass:"mini-button",attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(i){return t.openAddEditDialog("edit",e.row)}}},[t._v("编辑")]),i("el-button",{staticClass:"mini-button",attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(i){return t.del(e.row.id)}}},[t._v("删除")])],1)]}}])})],1),i("el-pagination",{attrs:{background:"","current-page":t.page,"page-sizes":[10,20,50,100],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.dataList.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),i("el-dialog",{attrs:{title:t.form.id?"修改":"添加",visible:t.AddEditDialog,width:"850px",top:"20px"},on:{"update:visible":function(e){t.AddEditDialog=e}}},[i("el-form",{attrs:{"status-icon":"","label-width":"70px"}},[i("el-form-item",{attrs:{label:"文章类型"}},[i("el-select",{attrs:{placeholder:"请选择文章类型"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}},t._l(t.options,function(t){return i("el-option",{key:t.val,attrs:{label:t.label,value:t.val}})}),1)],1),i("el-form-item",{attrs:{label:"文章排序"}},[i("el-input",{attrs:{placeholder:"请输入排序"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),i("el-form-item",{attrs:{label:"文章标题"}},[i("el-input",{attrs:{placeholder:"请输入文章标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"文章内容"}},[i("editor-bar",{attrs:{isClear:t.isClear},on:{change:t.change},model:{value:t.form.body,callback:function(e){t.$set(t.form,"body",e)},expression:"form.body"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.AddEditDialog=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.addEdit}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"预览文章",visible:t.previewDialog,width:"800px",top:"20px"},on:{"update:visible":function(e){t.previewDialog=e}}},[i("div",{domProps:{innerHTML:t._s(t.form.body)}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.previewDialog=!1}}},[t._v("关闭")])],1)])],1)},o=[],l=(i("55dd"),i("a897")),s={data:function(){return{loading:!1,test:"",isClear:!1,dataList:[],page:1,limit:10,AddEditDialog:!1,options:[],type:"",form:{code:"",title:"",body:"",id:"",sort:""},previewDialog:!1}},components:{EditorBar:l["a"]},methods:{change:function(t){},handleSizeChange:function(t){this.limit=t,this.getDataList()},handleCurrentChange:function(t){this.page=t,this.getDataList()},getDataList:function(){var t=this;this.loading=!0,this.$api.getArticleList({page:this.page,limit:this.limit,type:this.type}).then(function(e){t.dataList=e.data||[],e.code&&t.$message[e.code?"warning":"success"](e.data),t.loading=!1})},del:function(t){var e=this,i=this;i.$confirm("确认删除该项吗?","提示").then(function(){i.$api.delArticle({id:t}).then(function(t){e.$message[t.code?"error":"success"](t.data.message),e.page=e.$options.filters.pagination(e.page,e.limit,e.dataList.total),i.getDataList()})}).catch(function(){i.$message.info("已取消删除")})},openAddEditDialog:function(t,e){if("add"==t)for(var i in this.form)this.form[i]="";else this.form.title=e.title,this.form.code=e.code,this.form.body=e.body,this.form.sort=e.sort,this.form.id=e.id;this.AddEditDialog=!0},addEdit:function(){var t=this,e=this.form.id;this.$api[e?"editArticle":"addArticle"](this.form).then(function(i){e&&(t.page=1),t.$message[i.code?"error":"success"](i.data.message),t.AddEditDialog=!!i.code,t.getDataList()})},getDataTypeList:function(){var t=this;this.$api.getDataTypeList().then(function(e){t.options=e.data.list||[]})},search:function(){this.page=1,this.getDataList()}},created:function(){this.getDataList(),this.getDataTypeList()}},n=s,r=(i("0dc7"),i("2877")),c=Object(r["a"])(n,a,o,!1,null,"06725500",null);e["default"]=c.exports},"2f21":function(t,e,i){"use strict";var a=i("79e5");t.exports=function(t,e){return!!t&&a(function(){e?t.call(null,function(){},1):t.call(null)})}},"55dd":function(t,e,i){"use strict";var a=i("5ca1"),o=i("d8e8"),l=i("4bf8"),s=i("79e5"),n=[].sort,r=[1,2,3];a(a.P+a.F*(s(function(){r.sort(void 0)})||!s(function(){r.sort(null)})||!i("2f21")(n)),"Array",{sort:function(t){return void 0===t?n.call(l(this)):n.call(l(this),o(t))}})},5902:function(t,e,i){}}]);
//# sourceMappingURL=systenArticle.78b48853.js.map