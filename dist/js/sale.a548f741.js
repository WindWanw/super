(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["sale"],{"2a18":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},[a("div",{staticClass:"table_title"},[t.show?a("el-button",{attrs:{type:"primary",icon:"el-icon-d-arrow-left",size:"mini"},on:{click:t.getBack}},[t._v("返回")]):t._e(),t.show?t._e():a("span"),a("div",{staticClass:"search_wrap"},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入订单编号",size:"mini"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.order_sn,callback:function(e){t.order_sn=e},expression:"order_sn"}}),t._v("申请时间：\n      "),a("el-date-picker",{staticStyle:{margin:"0 10px"},attrs:{"value-format":"timestamp",size:"mini",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"起始时间","end-placeholder":"终止时间","picker-options":t.pickerOptions},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.search}},[t._v("搜索")])],1)],1),a("div",{staticClass:"content",staticStyle:{width:"100%"}},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.tabClick},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.tabList,function(e,s){return a("el-tab-pane",{key:s,attrs:{label:e.label,name:e.name}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],key:Math.random(),attrs:{data:t.dataList.list,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"expand_wrap"},[a("p",[t._v("\n                  商品图片：\n                  "),a("img",{staticStyle:{width:"75px",height:"75px"},attrs:{src:e.row.goods_img}})]),a("p",[t._v("商品名称："+t._s(e.row.goods_name))]),a("p",[t._v("产品型号："+t._s(e.row.attr_val?e.row.attr_val:"无"))]),a("p",[t._v("售后原因："+t._s(e.row.reason))]),a("p",[t._v("售后说明："+t._s(e.row.explain))]),e.row.certificate.length?a("p",t._l(e.row.certificate,function(e,s){return a("span",{key:s,staticClass:"certificate-img"},[a("img",{attrs:{src:e},on:{click:function(a){return t.viewImg(e)}}})])}),0):a("p",[t._v("凭证：无")])])]}}],null,!0)}),a("el-table-column",{attrs:{prop:"order_sn",label:"订单编号",align:"center"}}),a("el-table-column",{attrs:{prop:"username",label:"申请人",align:"center"}}),a("el-table-column",{attrs:{prop:"amount",label:"售后金额(元)",align:"center"}}),a("el-table-column",{attrs:{prop:"types",label:"售后类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:"1"==e.row.types?"color:red":""},[t._v(t._s("1"==e.row.types?"退款":"退货退款"))])]}}],null,!0)}),"3"==t.status?a("el-table-column",{attrs:{prop:"status",label:"退货物流",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["2"==e.row.types&&"6"==e.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.openExpressDialog(e.row)}}},[t._v("查看物流")]):a("span",{style:"2"!=e.row.types?"":"6"!=e.row.status?"color:red":""},[t._v(t._s("2"!=e.row.types?"不存在物流信息":"6"!=e.row.status?"未填写退货物流":""))])]}}],null,!0)}):t._e(),"5"!=t.status?a("el-table-column",{attrs:{prop:"create_times",label:"申请时间",align:"center"}}):t._e(),"5"==t.status?a("el-table-column",{attrs:{prop:"times",label:"退款时间",align:"center"}}):t._e(),"2"==t.status||"3"==t.status?a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["2"==t.status?a("el-button",{staticClass:"mini-button",attrs:{type:"success",size:"mini",icon:"iconfont daichuli"},on:{click:function(a){return t.openHandleDialog(e.row)}}},[t._v("处理")]):t._e(),"3"==t.status?a("el-button",{staticClass:"mini-button",attrs:{type:"success",size:"mini",icon:"iconfont daichuli"},on:{click:function(a){return t.applyRefund(e.row)}}},[t._v("申请退款")]):t._e()]}}],null,!0)}):t._e()],1)],1)}),1),a("el-pagination",{attrs:{background:"","current-page":t.page,"page-sizes":[10,20,50,100],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.dataList.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"退货物流信息",visible:t.expressDialog},on:{"update:visible":function(e){t.expressDialog=e}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"物流公司"}},[a("el-input",{attrs:{readonly:""},model:{value:t.express_company,callback:function(e){t.express_company=e},expression:"express_company"}})],1),a("el-form-item",{attrs:{label:"物流单号"}},[a("el-input",{attrs:{readonly:""},model:{value:t.express_num,callback:function(e){t.express_num=e},expression:"express_num"}})],1),a("el-form-item",{attrs:{label:"发起时间"}},[a("el-input",{attrs:{readonly:""},model:{value:t.express_time,callback:function(e){t.express_time=e},expression:"express_time"}})],1)],1)],1),a("el-dialog",{attrs:{title:"处理售后",visible:t.handleDialog},on:{"update:visible":function(e){t.handleDialog=e},close:function(e){t.form.status=""}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"售后处理"}},[a("el-radio-group",{on:{change:t.clear},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-radio",{attrs:{label:3}},[t._v("同意")]),a("el-radio",{attrs:{label:4}},[t._v("拒绝")])],1)],1),"4"==t.form.status?a("el-form-item",{attrs:{label:"拒绝原因"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.result,callback:function(e){t.$set(t.form,"result",e)},expression:"form.result"}})],1):t._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handle()}}},[t._v("确定")]),a("el-button",{on:{click:function(e){t.handleDialog=!1}}},[t._v("取消")])],1)],1),a("el-dialog",{attrs:{visible:t.viewImgDialog},on:{"update:visible":function(e){t.viewImgDialog=e}}},[a("div",{staticClass:"view-img"},[a("img",{attrs:{src:t.image}})])])],1)},i=[],n=(a("7f7f"),{data:function(){return{loading:!1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},tabList:[{label:"等待处理",name:"2"},{label:"已同意",name:"3"},{label:"申请售后",name:"0"},{label:"商户同意",name:"1"},{label:"平台拒绝",name:"4"},{label:"等待退款",name:"7"},{label:"完成售后",name:"5"}],date:[],status:"2",dataList:[],page:1,limit:10,order_sn:"",show:!1,viewImgDialog:!1,handleDialog:!1,image:"",form:{id:"",status:"",result:""},uid:JSON.parse(localStorage.getItem("userinfo")).id,express_company:"",express_num:"",express_time:"",expressDialog:!1}},mounted:function(){},methods:{viewImg:function(t){this.viewImgDialog=!0,this.image=t},handleSizeChange:function(t){this.limit=t,this.getDataList()},handleCurrentChange:function(t){this.page=t,this.getDataList()},getBack:function(){var t=this;this.loading=!0,this.$api.getSaleList({page:1,limit:10,status:"2"}).then(function(e){t.dataList=e.data||[],t.loading=!1,t.show=!1,t.status="2",t.date=[],t.order_sn=""})},getDataList:function(){var t=this;this.loading=!0,this.$api.getSaleList({page:this.page,limit:this.limit,status:this.status,times:this.date,order_sn:this.order_sn}).then(function(e){t.dataList=e.data||[],t.loading=!1})},tabClick:function(t){this.status=t.name,this.page=1,this.getDataList()},search:function(){this.show=!0,this.page=1,this.getDataList()},openHandleDialog:function(t){this.form.id=t.id,this.clear(),this.handleDialog=!0},clear:function(){this.form.result="",console.log(this.form)},handle:function(){var t=this;this.$api.suProcess(this.form).then(function(e){t.$message[e.code?"warning":"success"](e.data.message),t.handleDialog=!1,t.getDataList()})},openExpressDialog:function(t){this.express_company=t.company,this.express_num=t.express_num,this.express_time=t.express_time,this.expressDialog=!0},applyRefund:function(t){var e=this;this.form.id=t.id,this.form.status="7","2"==t.types&&"6"!=t.status?this.$confirm("该用户未填写退货物流信息，确定申请退款吗？").then(function(t){e.handle()}):this.handle()}},created:function(){this.getDataList()}}),l=n,o=(a("baed"),a("2877")),r=Object(o["a"])(l,s,i,!1,null,"5404ec5b",null);e["default"]=r.exports},baed:function(t,e,a){"use strict";var s=a("e1c6"),i=a.n(s);i.a},e1c6:function(t,e,a){}}]);
//# sourceMappingURL=sale.a548f741.js.map