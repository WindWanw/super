(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["order"],{be67:function(e,t,a){"use strict";var n=a("e0a5"),i=a.n(n);i.a},dbf5:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order"},[a("div",{staticClass:"table_title"},[a("div",[e.isShow?a("el-button",{staticClass:"el-icon-d-arrow-left",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.back()}}},[e._v("返回")]):e._e()],1),a("div",{staticClass:"search_wrap"},[a("el-select",{staticClass:"selectOrder",attrs:{size:"mini",clearable:"",placeholder:"请选择订单类型"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.is_online,callback:function(t){e.is_online=t},expression:"is_online"}},e._l(e.order_typeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.val}})}),1),a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{clearable:"",placeholder:"请输入支付订单编号",size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.pay_sn,callback:function(t){e.pay_sn=t},expression:"pay_sn"}}),a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入订单编号",size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("el-date-picker",{staticStyle:{margin:"0 10px"},attrs:{"value-format":"timestamp",size:"mini",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.search}},[e._v("搜索")])],1)]),a("div",{staticClass:"content",staticStyle:{width:"100%"}},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.tabClick},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.tabList,function(t,n){return a("el-tab-pane",{key:n,attrs:{label:t.label,name:t.name}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.dataList.list,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"order_sn",label:"订单编号",align:"center"}}),a("el-table-column",{attrs:{prop:"user_name",label:"用户名",align:"center"}}),a("el-table-column",{attrs:{prop:"amount",label:"订单金额(元)",width:"60px",align:"center"}}),a("el-table-column",{attrs:{prop:"admin_commission",label:"平台获得(元)",width:"60px",align:"center"}}),a("el-table-column",{attrs:{prop:"ag_commission",label:"代理商获得(元)",width:"60px",align:"center"}}),a("el-table-column",{attrs:{prop:"su_commission",label:"商户获得(元)",width:"60px",align:"center"}}),a("el-table-column",{attrs:{prop:"gu_commission",label:"专引师获得(元)",width:"60px",align:"center"}}),a("el-table-column",{attrs:{prop:"outlet",label:"折扣减免金额",width:"60px",align:"center"}}),a("el-table-column",{attrs:{prop:"card_id",label:"卡券编号",width:"60px",align:"center"}}),a("el-table-column",{attrs:{prop:"guide_name",label:"所属专引师",align:"center"}}),a("el-table-column",{attrs:{prop:"times",label:"下单时间",width:"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatTimeStamp")(t.row.times)))]}}],null,!0)}),a("el-table-column",{attrs:{prop:"status",label:"订单状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"mini-button",attrs:{type:e._f("payStatus")(t.row.status),size:"mini"}},[e._v(e._s(e._f("orderStatus")(t.row.status)))])]}}],null,!0)}),-1!==["2","3","5"].indexOf(e.status)&&1==e.uid?a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"mini-button",attrs:{type:"danger",size:"mini",icon:"iconfont qian"},on:{click:function(a){return e.refund(t.row.id)}}},[e._v("退款")])]}}],null,!0)}):e._e()],1)],1)}),1),a("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.dataList.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},i=[],l=(a("7f7f"),a("1c46"),{data:function(){return{loading:!1,isShow:!1,height:100,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},tabList:[{label:"全部",name:"0"},{label:"待付款",name:"1"},{label:"待发货",name:"2"},{label:"已发货",name:"3"},{label:"退单",name:"4"},{label:"交易成功",name:"5"}],name:"",pay_sn:"",date:[],status:"0",dataList:[],page:1,limit:10,is_online:"",order_typeList:[{label:"线上订单",val:1},{label:"线下订单",val:2},{label:"技术服务费",val:3}],uid:JSON.parse(localStorage.getItem("userinfo")).id}},methods:{handleSizeChange:function(e){this.limit=e,this.getDataList()},handleCurrentChange:function(e){this.page=e,this.getDataList()},getDataList:function(){var e=this;this.loading=!0,this.$api.getOrderList({page:this.page,limit:this.limit,status:this.status,times:this.date,order_sn:this.name,pay_sn:this.pay_sn,is_online:this.is_online}).then(function(t){e.dataList=t.data||[],t.code&&e.$message[t.code?"warning":"success"](t.data),e.loading=!1})},tabClick:function(e){this.status=e.name,this.page=1,this.getDataList()},search:function(){this.page=1,this.getDataList(),this.isShow=!0},back:function(){this.page=1,this.limit=10,this.status="0",this.date=[],this.name="",this.pay_sn="",this.is_online="",this.getDataList(),this.isShow=!1},searchTypeList:function(e){console.log(e)},refund:function(e){var t=this;if(1!=JSON.parse(localStorage.getItem("userinfo")).id)return this.$message.error("当前登录用户没有权限退款");this.$confirm("确定要给该用户退款吗？").then(function(a){t.$api.setRefund({order_id:e,type:"GOODS"}).then(function(e){t.$message[e.code?"warning":"success"](e.data.message),t.getDataList()})}).catch(function(e){})}},created:function(){this.getDataList()}}),s=l,r=(a("be67"),a("2877")),o=Object(r["a"])(s,n,i,!1,null,"1321afb6",null);t["default"]=o.exports},e0a5:function(e,t,a){}}]);
//# sourceMappingURL=order.165c0037.js.map