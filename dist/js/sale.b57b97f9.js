(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["sale"],{"155b":function(t,e,a){"use strict";var i=a("178b"),s=a.n(i);s.a},"178b":function(t,e,a){},"2a18":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order"},[a("div",{staticClass:"table_title"},[t.show?a("el-button",{attrs:{type:"primary",icon:"el-icon-d-arrow-left",size:"mini"},on:{click:t.getBack}},[t._v("返回")]):t._e(),t.show?t._e():a("span"),a("div",{staticClass:"search_wrap"},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入订单编号",size:"small"},model:{value:t.order_sn,callback:function(e){t.order_sn=e},expression:"order_sn"}}),t._v("申请时间：\n      "),a("el-date-picker",{staticStyle:{margin:"0 10px"},attrs:{"value-format":"timestamp",size:"small",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"起始时间","end-placeholder":"终止时间","picker-options":t.pickerOptions},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:t.search}},[t._v("搜索")])],1)],1),a("div",{staticClass:"content",staticStyle:{width:"100%"}},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.tabClick},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.tabList,function(e,i){return a("el-tab-pane",{key:i,attrs:{label:e.label,name:e.name}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.dataList.list,stripe:"",border:"",height:t.height}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"expand_wrap"},[a("p",[t._v("售后原因："+t._s(e.row.reason))]),a("p",[t._v("售后说明："+t._s(e.row.explain))]),e.row.certificate.length?a("p",t._l(e.row.certificate,function(e,i){return a("span",{key:i,staticClass:"certificate-img"},[a("img",{attrs:{src:e},on:{click:function(a){return t.viewImg(e)}}})])}),0):a("p",[t._v("凭证：无")])])]}}],null,!0)}),a("el-table-column",{attrs:{prop:"order_sn",label:"订单编号",align:"center"}}),a("el-table-column",{attrs:{prop:"username",label:"申请人",align:"center"}}),a("el-table-column",{attrs:{prop:"goods_img",label:"商品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"75px",height:"75px"},attrs:{src:t.row.goods_img}})]}}],null,!0)}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称",align:"center"}}),a("el-table-column",{attrs:{prop:"attr_val",label:"产品型号",align:"center"}}),a("el-table-column",{attrs:{prop:"amount",label:"售后金额(元)",align:"center"}}),a("el-table-column",{attrs:{prop:"types",label:"售后类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.types?a("span",{staticStyle:{color:"red"}},[t._v("退款")]):a("span",[t._v("退货退款")])]}}],null,!0)}),"5"!=t.status?a("el-table-column",{attrs:{prop:"create_times",label:"申请时间",align:"center"}}):t._e(),"5"==t.status?a("el-table-column",{attrs:{prop:"times",label:"退款时间",align:"center"}}):t._e(),"2"==t.status||"3"==t.status?a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["2"==t.status?a("el-button",{staticClass:"mini-button",attrs:{type:"success",size:"mini",icon:"iconfont daichuli"},on:{click:function(a){t.handleDialog=!0,t.form.id=e.row.id}}},[t._v("处理")]):t._e(),"3"==t.status?a("el-button",{staticClass:"mini-button",attrs:{type:"primary",size:"mini",icon:"iconfont qian"},on:{click:t.handle}},[t._v("退款处理")]):t._e()]}}],null,!0)}):t._e()],1)],1)}),1),a("el-pagination",{attrs:{background:"","current-page":t.page,"page-sizes":[10,20,50,100],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.dataList.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"处理售后",visible:t.handleDialog},on:{"update:visible":function(e){t.handleDialog=e},close:function(e){t.form.status=""}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"售后处理"}},[a("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-radio",{attrs:{label:"3"}},[t._v("同意")]),a("el-radio",{attrs:{label:"4"}},[t._v("拒绝")])],1)],1),"4"==t.form.status?a("el-form-item",{attrs:{label:"拒绝原因"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.result,callback:function(e){t.$set(t.form,"result",e)},expression:"form.result"}})],1):t._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handle}},[t._v("确定")]),a("el-button",{on:{click:function(e){t.handleDialog=!1}}},[t._v("取消")])],1)],1),a("el-dialog",{attrs:{visible:t.viewImgDialog},on:{"update:visible":function(e){t.viewImgDialog=e}}},[a("div",{staticClass:"view-img"},[a("img",{attrs:{src:t.image}})])])],1)},s=[],l=(a("7f7f"),{data:function(){return{loading:!1,height:100,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},tabList:[{label:"等待处理",name:"2"},{label:"已同意",name:"3"},{label:"已拒绝",name:"4"},{label:"售后申请",name:"0"},{label:"商户同意",name:"1"},{label:"完成售后",name:"5"}],date:[],status:"2",dataList:[],page:1,limit:10,order_sn:"",show:!1,viewImgDialog:!1,handleDialog:!1,image:"",form:{id:"",status:"",result:""}}},mounted:function(){},methods:{viewImg:function(t){this.viewImgDialog=!0,this.image=t},handleSizeChange:function(t){this.limit=t,this.getDataList()},handleCurrentChange:function(t){this.page=t,this.getDataList()},getBack:function(){var t=this;this.loading=!0,this.$api.getSaleList({page:1,limit:10,status:"2"}).then(function(e){t.dataList=e.data||[],t.loading=!1,t.show=!1,t.status="2",t.date=[],t.order_sn=""})},getDataList:function(){var t=this;this.loading=!0,this.$api.getSaleList({page:this.page,limit:this.limit,status:this.status,times:this.date,order_sn:this.order_sn}).then(function(e){t.dataList=e.data||[],t.height=100;var a=e.data.total;a>=10?t.height=750:0!=a&&(t.height=100*a),t.loading=!1})},tabClick:function(t){this.status=t.name,this.page=1,this.getDataList()},search:function(){this.show=!0,this.page=1,this.getDataList()},handle:function(){var t=this;(this.form.status="3")&&(this.form.result=""),"4"!=this.form.status||""!=this.form.result?this.$api.suProcess(this.form).then(function(e){t.$message(e.data.message),t.handleDialog=!1,t.getDataList()}):this.$notify({title:"警告",message:"请填写拒绝原因",type:"warning"})}},created:function(){this.getDataList()}}),n=l,o=(a("155b"),a("2877")),r=Object(o["a"])(n,i,s,!1,null,"44e65777",null);e["default"]=r.exports}}]);
//# sourceMappingURL=sale.b57b97f9.js.map