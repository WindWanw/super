(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["agent"],{"7f4e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"agent"},[a("div",{staticClass:"table_title"},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.openAddEditDialog("add")}}},[e._v("添加代理商")]),a("div",{staticClass:"search_wrap"},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入账号",size:"small"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),a("el-select",{staticStyle:{margin:"0 10px"},attrs:{clearable:"",placeholder:"请选择用户类型",size:"small"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[a("el-option",{attrs:{label:"正常",value:1}}),a("el-option",{attrs:{label:"禁用",value:-1}})],1),a("el-date-picker",{attrs:{"value-format":"timestamp",size:"small",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.search}},[e._v("搜索")])],1)],1),a("div",{staticClass:"content",staticStyle:{width:"100%"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList.list,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"expand_wrap"},[a("p",[a("span",[e._v("身份证号码:")]),e._v(e._s(t.row.idcard))]),a("p",[a("span",[e._v("身份证正反面:")]),a("img",{staticClass:"idcard_img",attrs:{src:t.row.picOn}}),a("img",{staticClass:"idcard_img",attrs:{src:t.row.picOff}})])])]}}])}),a("el-table-column",{attrs:{prop:"city",label:"代理城市"}}),a("el-table-column",{attrs:{prop:"username",label:"账号"}}),a("el-table-column",{attrs:{prop:"name",label:"联系人姓名"}}),a("el-table-column",{attrs:{prop:"tel",label:"手机号码"}}),a("el-table-column",{attrs:{prop:"",label:"账号状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",title:"1"==t.row.status?"点击禁用":"点击解除禁用",type:"1"==t.row.status?"success":"info"},on:{click:function(a){return e.userStop(t.row.id)}}},[e._v(e._s(e._f("userStatus")(t.row.status)))])]}}])}),a("el-table-column",{attrs:{prop:"times",label:"代理时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatTimeStamp")(t.row.times)))]}}])}),a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"cz_btn"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.openAddEditDialog("edit",t.row)}}},[e._v("编辑")])],1)]}}])})],1),a("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.dataList.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{top:"20px",title:e.form.id?"编辑":"添加",visible:e.AddEditDialog,width:"650px"},on:{"update:visible":function(t){e.AddEditDialog=t},close:function(t){return e.$refs["ruleForm"].resetFields()}}},[a("el-form",{ref:"ruleForm",attrs:{"status-icon":"",model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"城市"}},[a("el-cascader",{attrs:{options:e.cityData,"change-on-select":"",placeholder:e.form.id?"如需修改请选择":"请选择代理城市"},model:{value:e.selectCity,callback:function(t){e.selectCity=t},expression:"selectCity"}}),e.form.id?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("当前城市:"+e._s(e.city))]):e._e()],1),e.form.id?e._e():a("el-form-item",{attrs:{label:"账号",prop:e.form.id?"":"username"}},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:e.form.id?"":"password"}},[a("el-input",{attrs:{type:"password",placeholder:e.form.id?"不填默认不修改":"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"联系人姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入联系人姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"手机号码",prop:"tel"}},[a("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),a("el-form-item",{attrs:{label:"身份证号码",prop:"idcard"}},[a("el-input",{attrs:{placeholder:"请输入身份证号码"},model:{value:e.form.idcard,callback:function(t){e.$set(e.form,"idcard",t)},expression:"form.idcard"}})],1),a("el-form-item",{attrs:{label:"身份证正面",prop:"picOn"}},[a("el-upload",{attrs:{action:e.axios.defaults.baseURL+"/common/upload/file/sfz_upload_dir/front",accept:"image/jpeg, image/gif, image/png, image/bmp","before-upload":e.beforeUp1,"show-file-list":!1,"on-success":e.upSuc1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),e.form.picOn?a("img",{staticClass:"idcard_img",attrs:{src:e.form.picOn}}):e._e()],1),a("el-form-item",{attrs:{label:"身份证反面",prop:"picOff"}},[a("el-upload",{attrs:{action:e.axios.defaults.baseURL+"/common/upload/file/sfz_upload_dir/front",accept:"image/jpeg,image/gif,image/png,image/bmp","before-upload":e.beforeUp2,"show-file-list":!1,"on-success":e.upSuc2}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),e.form.picOff?a("img",{staticClass:"idcard_img",attrs:{src:e.form.picOff}}):e._e()],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.AddEditDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addEdit}},[e._v("确 定")])],1)],1)],1)},s=[],r=(a("7f7f"),a("2e8e")),l={data:function(){return{loading:!1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},fileList:[],username:"",date:"",status:"",page:1,limit:10,dataList:[],AddEditDialog:!1,cityData:r["a"],selectCity:[],city:"",form:{username:"",password:"",city:"",tel:"",id:"",name:"",address:"",idcard:"",picOn:"",picOff:""},rules:{username:[{required:!0,message:"账号不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],tel:[{validator:this.$rules.checkPhone,required:!0,trigger:"blur"}],name:[{required:!0,message:"联系人姓名不能为空",trigger:"blur"}],address:[{required:!0,message:"联系地址不能为空",trigger:"blur"}],idcard:[{validator:this.$rules.checkId,required:!0,trigger:"blur"}],picOn:[{required:!0,message:"身份证正面不能为空",trigger:"blur"}],picOff:[{required:!0,message:"身份证反面不能为空",trigger:"blur"}]}}},methods:{handleSizeChange:function(e){this.limit=e,this.getDataList()},handleCurrentChange:function(e){this.page=e,this.getDataList()},getDataList:function(){var e=this;this.loading=!0,this.$api.getAgentList({page:this.page,limit:this.limit,times:this.date,status:this.status,username:this.username}).then(function(t){e.dataList=t.data||[],e.loading=!1})},search:function(){this.page=1,this.getDataList()},openAddEditDialog:function(e,t){var a=this;if("add"==e){for(var i in this.form)this.form[i]="";this.selectCity=[]}else a.form.id=t.id,a.form.username=t.username,a.form.password=t.password,this.city=t.city,this.selectCity=[],a.form.tel=t.tel,a.form.address=t.address,a.form.name=t.name,a.form.idcard=t.idcard,a.form.picOn=t.picOn,a.form.picOff=t.picOff;a.AddEditDialog=!0},beforeUp1:function(e){if(e.size>2097152)return this.$message.warning("图片不能超过2MB"),!1},upSuc1:function(e,t,a){console.log(e),e.code||(this.form.picOn=e.data.host+e.data.name)},beforeUp2:function(e){},upSuc2:function(e,t,a){console.log(e),e.code||(this.form.picOff=e.data.host+e.data.name)},addEdit:function(e,t){var a=this;this.$refs.ruleForm.validate(function(e){if(!e)return!1;a.$api[a.form.id?"editAgent":"addAgent"]({citycode:a.selectCity,idcard:a.form.idcard,name:a.form.name,password:a.form.password||"",picOff:a.form.picOff,picOn:a.form.picOn,tel:a.form.tel,username:a.form.username,id:a.form.id}).then(function(e){a.$message[e.code?"warning":"success"](e.data.message),a.AddEditDialog=!!e.code,a.form.id||(a.page=1),a.getDataList()})})},userStop:function(e){var t=this;this.$confirm("确认进行该项操作吗?","提示",{type:"warning"}).then(function(){t.$api.userStop({uid:e}).then(function(e){t.$message[e.code?"warning":"success"](e.data),t.getDataList()})}).catch(function(){t.$message.info("已取消删除")})}},created:function(){this.getDataList()}},o=l,n=(a("9f3e"),a("2877")),c=Object(n["a"])(o,i,s,!1,null,"26fc809e",null);t["default"]=c.exports},"9f3e":function(e,t,a){"use strict";var i=a("e42c"),s=a.n(i);s.a},e42c:function(e,t,a){}}]);
//# sourceMappingURL=agent.3a63f98e.js.map