{"version":3,"sources":["webpack:///./src/views/ad.vue?d15d","webpack:///src/views/ad.vue","webpack:///./src/views/ad.vue?eff8","webpack:///./src/views/ad.vue","webpack:///./src/views/ad.vue?c174"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","type","size","icon","on","click","$event","openAddEditDialog","_v","directives","name","rawName","value","expression","data","dataList","list","stripe","border","prop","label","width","scopedSlots","_u","key","fn","scope","_s","row","ads","title","url","src","pic","_e","_f","begin","timeout","del","id","background","current-page","page","page-sizes","page-size","limit","layout","total","size-change","handleSizeChange","current-change","handleCurrentChange","top","form","visible","AddEditDialog","update:visible","close","$refs","resetFields","ref","status-icon","model","rules","label-width","placeholder","callback","$$v","$set","options","cityData","change-on-select","selectCity","staticStyle","margin-left","city","action","axios","defaults","accept","before-upload","beforeUp1","show-file-list","on-success","upSuc1","value-format","align","unlink-panels","range-separator","start-placeholder","end-placeholder","slot","addEdit","staticRenderFns","advue_type_script_lang_js_","loading","times","required","message","trigger","components","upload","methods","val","getDataList","_this","$api","getAdList","then","res","item","i","date","file","$message","warning","fileList","console","log","code","host","_this2","that","length","ruleForm","validate","valid","_this3","$confirm","delAd","$options","filters","pagination","catch","info","created","views_advue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ad_vue_vue_type_style_index_0_id_a0abe956_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ad_vue_vue_type_style_index_0_id_a0abe956_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/ad.373b2c24.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ad\"},[_c('div',{staticClass:\"table_title\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.openAddEditDialog('add')}}},[_vm._v(\"添加广告\")])],1),_c('div',{staticClass:\"content\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"data\":_vm.dataList.list,\"stripe\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"city\",\"label\":\"城市\"}}),_c('el-table-column',{attrs:{\"prop\":\"ads\",\"label\":\"广告内容\",\"width\":\"250px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('span',[_vm._v(\"标题:\")]),_vm._v(_vm._s(scope.row.ads.title))]),_c('div',[_c('span',[_vm._v(\"链接:\")]),_vm._v(_vm._s(scope.row.ads.url))]),(scope.row.ads.pic)?_c('img',{staticClass:\"ad_img\",attrs:{\"src\":scope.row.ads.pic}}):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"prop\":\"page\",\"label\":\"页面\"}}),_c('el-table-column',{attrs:{\"prop\":\"adder\",\"label\":\"添加人\"}}),_c('el-table-column',{attrs:{\"prop\":\"checker\",\"label\":\"审核人\"}}),_c('el-table-column',{attrs:{\"prop\":\"begin\",\"label\":\"上架时间\",\"width\":\"100px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"formatTimeStamp\")(scope.row.begin)))]}}])}),_c('el-table-column',{attrs:{\"prop\":\"timeout\",\"label\":\"下架时间\",\"width\":\"100px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"formatTimeStamp\")(scope.row.timeout)))]}}])}),_c('el-table-column',{attrs:{\"prop\":\"\",\"label\":\"操作\",\"width\":\"180px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"cz_btn\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.openAddEditDialog('edit',scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.del(scope.row.id)}}},[_vm._v(\"删除\")])],1)]}}])})],1),_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.page,\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.limit,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.dataList.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"top\":\"20px\",\"title\":_vm.form.id?'修改':'添加',\"visible\":_vm.AddEditDialog,\"width\":\"650px\"},on:{\"update:visible\":function($event){_vm.AddEditDialog=$event},\"close\":function($event){return _vm.$refs['ruleForm'].resetFields()}}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"status-icon\":\"\",\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"广告页\",\"prop\":\"page\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入广告页\"},model:{value:(_vm.form.page),callback:function ($$v) {_vm.$set(_vm.form, \"page\", $$v)},expression:\"form.page\"}})],1),_c('el-form-item',{attrs:{\"label\":\"城市\"}},[_c('el-cascader',{attrs:{\"options\":_vm.cityData,\"change-on-select\":\"\",\"placeholder\":_vm.form.id?'如需修改请选择':'请选择城市'},model:{value:(_vm.selectCity),callback:function ($$v) {_vm.selectCity=$$v},expression:\"selectCity\"}}),(_vm.form.id)?_c('span',{staticStyle:{\"margin-left\":\"20px\"}},[_vm._v(\"当前城市:\"+_vm._s(_vm.city))]):_vm._e()],1),_c('el-form-item',{attrs:{\"label\":\"广告链接\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入广告链接\"},model:{value:(_vm.form.url),callback:function ($$v) {_vm.$set(_vm.form, \"url\", $$v)},expression:\"form.url\"}})],1),_c('el-form-item',{attrs:{\"label\":\"广告标题\",\"prop\":_vm.form.pic?'':'title'}},[_c('el-input',{attrs:{\"placeholder\":\"请输入广告标题\"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"广告图片\",\"prop\":_vm.form.title?'':'pic'}},[_c('el-upload',{attrs:{\"action\":((_vm.axios.defaults.baseURL) + \"/common/upload/file/adv_upload_dir\"),\"accept\":\"image/jpeg, image/gif, image/png, image/bmp\",\"before-upload\":_vm.beforeUp1,\"show-file-list\":false,\"on-success\":_vm.upSuc1}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1),(_vm.form.pic)?_c('img',{staticClass:\"ad_img\",attrs:{\"src\":_vm.form.pic}}):_vm._e()],1),_c('el-form-item',{attrs:{\"label\":\"上下架时间\",\"prop\":\"times\"}},[_c('el-date-picker',{attrs:{\"value-format\":\"timestamp\",\"size\":\"small\",\"type\":\"daterange\",\"align\":\"right\",\"unlink-panels\":\"\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.form.times),callback:function ($$v) {_vm.$set(_vm.form, \"times\", $$v)},expression:\"form.times\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.AddEditDialog = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addEdit}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n   <div class='ad'>\r\n       <div class=\"table_title\">\r\n         <el-button type=\"primary\" size=\"small\" icon=\"el-icon-plus\" @click=\"openAddEditDialog('add')\">添加广告</el-button>\r\n       </div>\r\n       <div class=\"content\">\r\n         <el-table :data=\"dataList.list\" stripe border v-loading=\"loading\">\r\n          <el-table-column prop=\"city\" label=\"城市\"></el-table-column>\r\n          <el-table-column prop=\"ads\" label=\"广告内容\" width=\"250px\">\r\n            <template slot-scope=\"scope\">\r\n              <div><span>标题:</span>{{scope.row.ads.title}}</div>\r\n              <div><span>链接:</span>{{scope.row.ads.url}}</div>\r\n              <img class=\"ad_img\" v-if=\"scope.row.ads.pic\" :src=\"scope.row.ads.pic\">\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"page\" label=\"页面\"></el-table-column>\r\n          <el-table-column prop=\"adder\" label=\"添加人\"></el-table-column>\r\n          <el-table-column prop=\"checker\" label=\"审核人\"></el-table-column>\r\n          <el-table-column prop=\"begin\" label=\"上架时间\" width=\"100px\">\r\n            <template slot-scope=\"scope\">{{scope.row.begin | formatTimeStamp}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"timeout\" label=\"下架时间\" width=\"100px\">\r\n            <template slot-scope=\"scope\">{{scope.row.timeout | formatTimeStamp}}</template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"\" label=\"操作\" width=\"180px\">\r\n              <template slot-scope=\"scope\">\r\n              <div class=\"cz_btn\">\r\n                <el-button @click=\"openAddEditDialog('edit',scope.row)\" type=\"primary\" size=\"mini\" icon=\"el-icon-edit\">编辑</el-button>\r\n                <el-button @click=\"del(scope.row.id)\" type=\"danger\" size=\"mini\" icon=\"el-icon-delete\">删除</el-button>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <el-pagination\r\n          background\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"page\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          :page-size=\"limit\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"dataList.total\">\r\n        </el-pagination>\r\n       </div>\r\n\r\n           <!-- 添加dialog -->\r\n         <el-dialog top=\"20px\" :title=\"form.id?'修改':'添加'\" :visible.sync=\"AddEditDialog\" width=\"650px\" @close=\"$refs['ruleForm'].resetFields()\">\r\n          <el-form status-icon :model=\"form\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\">\r\n            <el-form-item label=\"广告页\" prop=\"page\">\r\n              <el-input v-model=\"form.page\" placeholder=\"请输入广告页\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"城市\">\r\n              <el-cascader :options=\"cityData\" v-model=\"selectCity\" change-on-select :placeholder=\"form.id?'如需修改请选择':'请选择城市'\"></el-cascader>\r\n              <span v-if=\"form.id\" style=\"margin-left:20px\">当前城市:{{city}}</span>\r\n            </el-form-item>\r\n            <el-form-item label=\"广告链接\">\r\n              <el-input v-model=\"form.url\" placeholder=\"请输入广告链接\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"广告标题\" :prop=\"form.pic?'':'title'\">\r\n              <el-input v-model=\"form.title\" placeholder=\"请输入广告标题\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"广告图片\" :prop=\"form.title?'':'pic'\">\r\n                <el-upload\r\n                  :action=\"`${axios.defaults.baseURL}/common/upload/file/adv_upload_dir`\"\r\n                  accept=\"image/jpeg, image/gif, image/png, image/bmp\"\r\n                  :before-upload=\"beforeUp1\"\r\n                  :show-file-list=\"false\"\r\n                  :on-success=\"upSuc1\"\r\n                >\r\n                  <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n                </el-upload>\r\n                <img v-if=\"form.pic\" class=\"ad_img\" :src=\"form.pic\">\r\n            </el-form-item>\r\n            <el-form-item label=\"上下架时间\" prop=\"times\">\r\n              <el-date-picker\r\n                value-format=\"timestamp\"\r\n                size=\"small\"\r\n                v-model=\"form.times\"\r\n                type=\"daterange\"\r\n                align=\"right\"\r\n                unlink-panels\r\n                range-separator=\"至\"\r\n                start-placeholder=\"开始日期\"\r\n                end-placeholder=\"结束日期\"\r\n              ></el-date-picker>\r\n            </el-form-item>\r\n          </el-form>\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"AddEditDialog = false\">取 消</el-button>\r\n            <el-button type=\"primary\" @click=\"addEdit\">确 定</el-button>\r\n          </div>\r\n        </el-dialog>\r\n   </div>\r\n</template>\r\n\r\n<script>\r\nimport citys from '../utils/city.js';\r\nimport upload from '../components/upload';\r\n   export default {\r\n     data () {\r\n       return {\r\n         loading:false,\r\n          dataList:[],//数据源\r\n          page:1,//页\r\n          limit:10,//条\r\n          AddEditDialog:false,\r\n          cityData:citys,//城市数据\r\n          selectCity:[],//选择城市\r\n          city:'',\r\n          form:{\r\n              page:'',\r\n              title:'',\r\n              url:'',\r\n              pic:'',\r\n              id:'',\r\n              times:''\r\n          },\r\n          rules:{\r\n            page:[\r\n              { required: true, message: '账号不能为空', trigger: 'blur' }\r\n            ],\r\n            \r\n            title:[\r\n              { required: true, message: '广告标题不能为空', trigger: 'blur' }\r\n            ],\r\n            pic:[\r\n              { required: true, message: '广告图片不能为空', trigger: 'blur' }\r\n            ],\r\n            times:[\r\n              { required: true, message: '上下架时间不能为空', trigger: 'blur' }\r\n            ],\r\n          }\r\n     }\r\n   },\r\n   components: {\r\n     upload\r\n   },\r\n   methods:{\r\n     // 切换limit\r\n     handleSizeChange(val){\r\n       this.limit=val;\r\n       this.getDataList();\r\n     },\r\n    //  切换page\r\n     handleCurrentChange(val){\r\n       this.page=val;\r\n       this.getDataList();\r\n     },\r\n     //获取数据列表\r\n     getDataList(){\r\n       this.loading=true;\r\n       this.$api.getAdList({\r\n         page:this.page,\r\n         limit:this.limit,\r\n       })\r\n       .then(res=>{\r\n         this.dataList=res.data || [];\r\n         this.loading=false;\r\n       })\r\n     },\r\n     //打开添加修改dialog\r\n     openAddEditDialog(type,item){\r\n       if(type=='add'){\r\n         for(let i in this.form){\r\n             this.form[i]=\"\";\r\n         }\r\n         this.selectCity=[];\r\n       }else{\r\n         this.form.page=item.page;\r\n         this.city=item.city;\r\n         this.selectCity = [];\r\n         this.form.title=item.ads.title;\r\n         this.form.url=item.ads.url;\r\n         this.form.pic=item.ads.pic;\r\n         this.form.id=item.id;\r\n         let date=item.begin?[item.begin*1000,item.timeout*1000]:'';\r\n         this.form.times=date;\r\n       }\r\n       this.AddEditDialog=true;\r\n     },\r\n     //上次图片前\r\n    beforeUp1(file) {\r\n      if (file.size > 1024*2 * 1024) {\r\n        // 超出2m  取消上传\r\n        this.$message.warning('图片不能超过2MB')\r\n        return false\r\n      }\r\n    },\r\n    //上传成功后\r\n    upSuc1(res, file, fileList) {\r\n      console.log(res);\r\n      if (res.code) {\r\n        return;\r\n      } else {\r\n        this.form.pic = res.data.host + res.data.name;\r\n      }\r\n    },\r\n     //确认添加或修改\r\n     addEdit(){\r\n       let that=this;\r\n       if(!this.form.id){\r\n        if(!that.selectCity || !that.selectCity.length)return this.$message.warning('请选择城市');\r\n       }\r\n       that.$refs.ruleForm.validate(valid=>{\r\n         if(valid){\r\n          let ads={'title':that.form.title,'pic':that.form.pic,'url':that.form.url};\r\n           that.$api[that.form.id?'editAd':'addAd']({\r\n             page:that.form.page,\r\n             city:that.selectCity,\r\n             times:that.form.times,\r\n             ads,\r\n             id:that.form.id\r\n           })\r\n           .then(res=>{\r\n             that.AddEditDialog=res.code?true:false;\r\n             that.$message[res.code?'error':'success'](res.data.message);\r\n             if(!that.form.id){\r\n               this.page=1;\r\n             }\r\n             that.getDataList();\r\n           })\r\n         }else{\r\n           return false;\r\n         }\r\n       })\r\n     },\r\n     //删除\r\n     del(id){\r\n       this.$confirm('确认删除该项吗?','提示',{type:'warning'})\r\n       .then(()=>{\r\n         this.$api.delAd({id})\r\n         .then(res=>{\r\n           this.$message[res.code?'error':'success'](res.data.message);\r\n           this.page=this.$options.filters.pagination(this.page,this.limit,this.dataList.total);\r\n           this.getDataList();\r\n         })\r\n       })\r\n       .catch(()=>{\r\n         this.$message.info('已取消删除');\r\n       })\r\n     }\r\n   },\r\n   \r\n   created(){\r\n     this.getDataList();\r\n   }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .content{\r\n    background-color: #fff;\r\n    padding: 20px;\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    overflow: auto;\r\n  }\r\n  .avatar{\r\n    width: 30px;\r\n    height: 30px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ad.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ad.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ad.vue?vue&type=template&id=a0abe956&scoped=true&\"\nimport script from \"./ad.vue?vue&type=script&lang=js&\"\nexport * from \"./ad.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ad.vue?vue&type=style&index=0&id=a0abe956&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a0abe956\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ad.vue?vue&type=style&index=0&id=a0abe956&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ad.vue?vue&type=style&index=0&id=a0abe956&scoped=true&lang=css&\""],"sourceRoot":""}