(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userList"],{"0bfb":function(e,t,n){"use strict";var a=n("cb7c");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"18f3":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"userList"},[n("div",{staticClass:"table_title"},[n("div",[e.isShow?n("el-button",{staticClass:"el-icon-d-arrow-left",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.returnHome()}}},[e._v("返回")]):e._e()],1),n("div",{staticClass:"search_wrap"},[n("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入用户名",size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("el-input",{staticStyle:{width:"200px",margin:"0 10px"},attrs:{clearable:"",placeholder:"请输入城市名称",size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}}),n("el-select",{staticStyle:{margin:"0 10px"},attrs:{clearable:"",placeholder:"请选择用户性别",size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.sex,callback:function(t){e.sex=t},expression:"sex"}},[n("el-option",{attrs:{label:"男",value:1}}),n("el-option",{attrs:{label:"女",value:0}})],1),n("el-select",{staticStyle:{margin:"0 10px"},attrs:{clearable:"",placeholder:"请选择用户类型",size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[n("el-option",{attrs:{label:"正常",value:1}}),n("el-option",{attrs:{label:"禁用",value:-1}})],1),n("el-date-picker",{attrs:{size:"mini",type:"daterange",align:"right","unlink-panels":"","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.search}},[e._v("搜索")])],1)]),n("div",{staticClass:"content"},[n("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.tabClick},model:{value:e.utype,callback:function(t){e.utype=t},expression:"utype"}},e._l(e.tabList,function(t,a){return n("el-tab-pane",{key:a,attrs:{label:t.label,name:t.name}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",refInFor:!0,attrs:{data:e.dataList.list,stripe:"",border:"",height:e.height}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.row.vestUser,stripe:"",border:""}},[n("el-table-column",{attrs:{prop:"username",label:"用户名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.username)+e._s(t.row.isGuide?"(专引师)":"(消费者)"))]}}],null,!0)}),n("el-table-column",{attrs:{prop:"",label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{staticClass:"avatar",attrs:{src:e.row.avatar}})]}}],null,!0)}),n("el-table-column",{attrs:{prop:"sex",label:"性别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("sexStatus")(t.row.sex)))]}}],null,!0)}),n("el-table-column",{attrs:{prop:"city",label:"城市",align:"center"}}),n("el-table-column",{attrs:{prop:"",label:"账号状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"mini-button",attrs:{title:1==t.row.status?"点击禁用":"点击解除",type:1==t.row.status?"success":"info",size:"mini"},on:{click:function(n){return e.vestUserDel(t.row.id,t.row.status)}}},[e._v(e._s(t.row.status?"正常":"超出次数"))])]}}],null,!0)}),n("el-table-column",{attrs:{prop:"times",label:"注册日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatTimeStamp")(t.row.times,1)))]}}],null,!0)}),n("el-table-column",{attrs:{prop:"use",label:"使用次数",align:"center"}}),n("el-table-column",{attrs:{prop:"needs",label:"发布需求数",align:"center"}}),n("el-table-column",{attrs:{prop:"reply",label:"回复需求数",align:"center"}}),n("el-table-column",{attrs:{prop:"nickname",label:"昵称",align:"center"}}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"mini-button",attrs:{title:"删除马甲",type:"danger",size:"mini"},on:{click:function(n){return e.delVestUser(t.row)}}},[e._v("删除")])]}}],null,!0)})],1)]}}],null,!0)}),n("el-table-column",{attrs:{prop:"username",label:"用户名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.username)+"\n              "),n("div",[e._v(e._s(e._f("vestStatus")(t.row.isVest)))])]}}],null,!0)}),n("el-table-column",{attrs:{prop:"",label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{staticClass:"avatar",attrs:{src:e.row.avatar}})]}}],null,!0)}),n("el-table-column",{attrs:{prop:"sex",label:"性别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("sexStatus")(t.row.sex)))]}}],null,!0)}),n("el-table-column",{attrs:{prop:"city",label:"城市",align:"center"}}),n("el-table-column",{attrs:{prop:"tel",label:"手机号",align:"center"}}),n("el-table-column",{attrs:{prop:"coin",label:"积分",align:"center"}}),n("el-table-column",{attrs:{prop:"exp",label:"经验",align:"center"}}),n("el-table-column",{attrs:{prop:"card_price",label:"卡卷金额（元）",align:"center"}}),n("el-table-column",{attrs:{prop:"",label:"账号状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"mini-button",attrs:{title:"1"==t.row.status?"点击禁用":"点击解除禁用",type:"1"==t.row.status?"success":"info",size:"mini"},on:{click:function(n){return e.userStop(t.row.id)}}},[e._v(e._s(e._f("userStatus")(t.row.status)))])]}}],null,!0)}),n("el-table-column",{attrs:{prop:"times",label:"注册日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatTimeStamp")(t.row.times,1)))]}}],null,!0)}),n("el-table-column",{attrs:{prop:"nickname",label:"昵称",align:"center"}}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"mini-button",attrs:{title:"设置马甲",type:"primary",size:"mini"},on:{click:function(n){return e.openSetVestUser(t.row)}}},[e._v("设置马甲")]),n("el-button",{staticClass:"mini-button",staticStyle:{margin:"10px 0 0 0"},attrs:{title:"查看马甲用户",type:"success",size:"mini"},on:{click:function(n){return e.toogleExpand(t.row)}}},[e._v("查看马甲")]),1==e.uid?n("el-button",{staticClass:"mini-button",staticStyle:{margin:"10px 0 0 0"},attrs:{title:t.row.is_openid?"还原OpenID":"转换OpenID",type:t.row.is_openid?"primary":"danger",size:"mini"},on:{click:function(n){return e.setOpenId(t.row)}}},[e._v(e._s(t.row.is_openid?"还原OpenID":"转换OpenID"))]):e._e()]}}],null,!0)})],1)],1)}),1),n("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.dataList.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),n("el-dialog",{attrs:{title:"设置马甲用户",width:"750px",visible:e.openSetVestUserDialog,"append-to-body":""},on:{"update:visible":function(t){e.openSetVestUserDialog=t},close:function(t){e.form.uids=""}}},[n("el-form",{ref:"form",attrs:{"label-width":"150px",model:e.form}},[e.vestIdTag?n("el-form-item",{attrs:{label:"已存在的马甲id"}},[e._l(e.vestIdTag,function(t){return[n("el-tag",{key:t,staticStyle:{"margin-right":"10px"},attrs:{closable:"","disable-transitions":!1},on:{close:function(n){return e.handleClose(t)}}},[e._v(e._s(t))])]})],2):e._e(),n("el-form-item",{attrs:{label:"马甲用户"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入马甲用户id，多个用户id用“,”隔开"},model:{value:e.form.uids,callback:function(t){e.$set(e.form,"uids",t)},expression:"form.uids"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.openSetVestUserDialog=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.setVestUser()}}},[e._v("确 定")])],1)],1)],1)},i=[],s=(n("7f7f"),n("386d"),{data:function(){return{loading:!1,isShow:!1,height:100,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]},tabList:[{label:"全部",name:"0"},{label:"马甲主号",name:"1"}],utype:"0",username:"",status:"",date:"",sex:"",city:"",dataList:[],page:1,limit:10,openSetVestUserDialog:!1,vestIdTag:[],form:{id:"",uids:""},uid:JSON.parse(localStorage.getItem("userinfo")).id}},methods:{handleSizeChange:function(e){this.limit=e,this.getDataList()},handleCurrentChange:function(e){this.page=e,this.getDataList()},getDataList:function(){var e=this;this.loading=!0,this.$api.getUserlist({page:this.page,limit:this.limit,utype:this.utype,status:this.status,times:this.date,gender:this.sex,city:this.city,username:this.username}).then(function(t){e.dataList=t.data||[],e.height=100;var n=t.data.total;n>=10?e.height=750:0!=n&&(e.height=160*n),t.code&&e.$message[t.code?"warning":"success"](t.data),e.loading=!1})},search:function(){this.page=1,this.getDataList(),this.isShow=!0},toogleExpand:function(e){var t=this.$refs.table,n=t[this.utype];console.log(n),this.dataList.list.map(function(t){e.id!=t.id&&n.toggleRowExpansion(t,!1)}),n.toggleRowExpansion(e)},handleClose:function(e){var t=this;this.$api.delVestUsers({mainId:this.form.id,id:e}).then(function(n){n.code||(t.search(),t.openSetVestUserDialog=!0,t.vestIdTag.splice(t.vestIdTag.indexOf(e),1))})},delVestUser:function(e){var t=this;this.$api.delVestUsers({id:e.id,mainId:e.mainId}).then(function(e){t.$message[e.code?"warning":"success"](e.data.message),e.code||t.search()})},userStop:function(e){var t=this;this.$confirm("确认进行该项操作吗?","提示",{type:"warning"}).then(function(){t.$api.userStop({uid:e,result:"1"}).then(function(e){t.$message[e.code?"warning":"success"](e.data),t.getDataList()})}).catch(function(){t.$message.info("已取消操作")})},openSetVestUser:function(e){this.openSetVestUserDialog=!0,this.form.id=e.id,this.vestIdTag=e.vestId},setVestUser:function(){var e=this;this.$api.setVestUser(this.form).then(function(t){e.$message[t.code?"warning":"success"](t.data.message),t.code||(e.openSetVestUserDialog=!1,e.getDataList())})},vestUserDel:function(e,t){var n=this;this.$api.vestUserDel({id:e,status:t}).then(function(e){n.$message[e.code?"warning":"success"](e.data.message),n.search()})},tabClick:function(e){this.utype=e.name,this.page=1,this.getDataList()},returnHome:function(){this.page=1,this.limit=10,this.status="",this.times="",this.username="",this.city="",this.gender="",this.getDataList(),this.isShow=!1},setOpenId:function(e){var t=this;this.$confirm("确定要转换该用户的openid吗？").then(function(n){t.$api.setOpenId({uid:e.id,type:e.is_openid}).then(function(e){t.$message[e.code?"warning":"success"](e.data.message),e.code||t.getDataList()})}).catch(function(e){})}},created:function(){this.getDataList()}}),r=s,l=(n("f81e"),n("2877")),o=Object(l["a"])(r,a,i,!1,null,"2b87491f",null);t["default"]=o.exports},"214f":function(e,t,n){"use strict";n("b0c5");var a=n("2aba"),i=n("32e9"),s=n("79e5"),r=n("be13"),l=n("2b4c"),o=n("520a"),c=l("species"),u=!s(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),p=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var d=l(e),f=!s(function(){var t={};return t[d]=function(){return 7},7!=""[e](t)}),m=f?!s(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[d](""),!t}):void 0;if(!f||!m||"replace"===e&&!u||"split"===e&&!p){var g=/./[d],h=n(r,d,""[e],function(e,t,n,a,i){return t.exec===o?f&&!i?{done:!0,value:g.call(t,n,a)}:{done:!0,value:e.call(n,t,a)}:{done:!1}}),b=h[0],v=h[1];a(String.prototype,e,b),i(RegExp.prototype,d,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},"386d":function(e,t,n){"use strict";var a=n("cb7c"),i=n("83a1"),s=n("5f1b");n("214f")("search",1,function(e,t,n,r){return[function(n){var a=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,a):new RegExp(n)[t](String(a))},function(e){var t=r(n,e,this);if(t.done)return t.value;var l=a(e),o=String(this),c=l.lastIndex;i(c,0)||(l.lastIndex=0);var u=s(l,o);return i(l.lastIndex,c)||(l.lastIndex=c),null===u?-1:u.index}]})},"520a":function(e,t,n){"use strict";var a=n("0bfb"),i=RegExp.prototype.exec,s=String.prototype.replace,r=i,l="lastIndex",o=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e[l]||0!==t[l]}(),c=void 0!==/()??/.exec("")[1],u=o||c;u&&(r=function(e){var t,n,r,u,p=this;return c&&(n=new RegExp("^"+p.source+"$(?!\\s)",a.call(p))),o&&(t=p[l]),r=i.call(p,e),o&&r&&(p[l]=p.global?r.index+r[0].length:t),c&&r&&r.length>1&&s.call(r[0],n,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(r[u]=void 0)}),r}),e.exports=r},"5f1b":function(e,t,n){"use strict";var a=n("23c6"),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var s=n.call(e,t);if("object"!==typeof s)throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==a(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},b0c5:function(e,t,n){"use strict";var a=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:a!==/./.exec},{exec:a})},b994:function(e,t,n){},f81e:function(e,t,n){"use strict";var a=n("b994"),i=n.n(a);i.a}}]);
//# sourceMappingURL=userList.9b5daa0e.js.map