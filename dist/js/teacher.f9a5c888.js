(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["teacher"],{"4c46":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"teacher"},[i("div",{staticClass:"table_title"},[i("div",[t.isShow?i("el-button",{staticClass:"el-icon-d-arrow-left",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.back()}}},[t._v("返回")]):t._e()],1),i("div",{staticClass:"search_wrap"},[i("el-select",{attrs:{clearable:"",placeholder:"请选择用户类型",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[i("el-option",{attrs:{label:"正常",value:1}}),i("el-option",{attrs:{label:"禁用",value:-1}})],1),i("el-input",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入专引师用户名",size:"mini"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),i("el-input",{staticStyle:{width:"200px",margin:"0 10px"},attrs:{clearable:"",placeholder:"请输入专引师所在城市名称",size:"mini"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}}),i("el-date-picker",{staticStyle:{margin:"0 10px"},attrs:{"value-format":"timestamp",size:"small",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.times,callback:function(e){t.times=e},expression:"times"}}),i("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:t.search}},[t._v("搜索")])],1)]),i("div",{staticClass:"content"},[i("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.tabClick},model:{value:t.gtype,callback:function(e){t.gtype=e},expression:"gtype"}},t._l(t.tabList,function(e,n){return i("el-tab-pane",{key:n,attrs:{label:e.label,name:e.name}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList.list,stripe:"",border:"",height:t.height}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[""!=e.row.idcard?i("div",{staticClass:"expand_wrap"},[i("p",[i("span",[t._v("身份证号码:")]),t._v("\n                  "+t._s(e.row.idcard)+"\n                ")]),i("p",[i("span",[t._v("身份证正反面:")]),i("img",{staticClass:"idcard_img",attrs:{src:e.row.picOn}}),i("img",{staticClass:"idcard_img",attrs:{src:e.row.picOff}})])]):i("div",[i("span",[t._v("无实名信息")])])]}}],null,!0)}),i("el-table-column",{attrs:{prop:"username",label:"用户名",align:"center"}}),i("el-table-column",{attrs:{prop:"city",label:"专引城市",align:"center"}}),i("el-table-column",{attrs:{prop:"tel",label:"联系方式",align:"center"}}),i("el-table-column",{attrs:{prop:"tag",label:"标签",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.tag,function(e,n){return[n<3?i("el-tag",{key:e,attrs:{type:"mini"}},[t._v(t._s(e))]):t._e()]})]}}],null,!0)}),i("el-table-column",{attrs:{prop:"times",label:"注册时间",align:"center"}}),i("el-table-column",{attrs:{prop:"",label:"账号状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticClass:"mini-button",attrs:{title:"1"==e.row.status?"点击禁用":"点击解除禁用",type:"1"==e.row.status?"success":"info",size:"mini"},on:{click:function(i){return t.userStop(e.row.id)}}},[t._v(t._s(t._f("userStatus")(e.row.status)))])]}}],null,!0)}),i("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"cz_btn"},[i("el-button",{staticClass:"mini-button",attrs:{type:"warning",size:"mini",icon:"el-icon-edit-outline"},on:{click:function(i){return t.openPunishDialog(e.row)}}},[t._v("处罚")]),i("el-button",{staticClass:"mini-button",attrs:{type:"danger",size:"mini",icon:"iconfont qian"},on:{click:function(i){return t.refund(e.row.order_id)}}},[t._v("退款")])],1)]}}],null,!0)})],1)],1)}),1),i("el-pagination",{attrs:{background:"","current-page":t.page,"page-sizes":[10,20,50,100],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.dataList.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),i("el-dialog",{attrs:{title:"惩罚",visible:t.punishDialog,"label-width":"120px",width:"30%"},on:{"update:visible":function(e){t.punishDialog=e}}},[i("el-form",[i("el-form-item",{attrs:{label:"处罚类型"}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择处罚类型"},model:{value:t.punishType,callback:function(e){t.punishType=e},expression:"punishType"}},t._l(t.punishList,function(t){return i("el-option",{key:t.value,attrs:{label:t.title,value:t.val}})}),1)],1),t.punishType?i("el-form-item",{attrs:{label:"处罚内容"}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择处罚内容"},model:{value:t.punishContent,callback:function(e){t.punishContent=e},expression:"punishContent"}},t._l(t.punishContentList,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.ps}})}),1)],1):t._e()],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.punishDialog=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.punishSure}},[t._v("确 定")])],1)],1)],1)},a=[],s=(i("7f7f"),i("ac6a"),{data:function(){return{loading:!1,isShow:!1,height:100,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-6048e5),t.$emit("pick",[i,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-2592e6),t.$emit("pick",[i,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-7776e6),t.$emit("pick",[i,e])}}]},tabList:[{label:"专引师",name:"0"},{label:"马甲专引师",name:"1"}],dataList:[],page:1,limit:10,gtype:"0",times:"",shopname:"",status:1,username:"",city:"",punishDialog:!1,punishList:"",punishContentList:"",punishId:"",punishType:"",punishContent:""}},watch:{punishType:function(t,e){var i=this;console.log(t),this.punishList.forEach(function(e){t==e.val&&(i.punishContentList=e.type)})}},components:{},methods:{getDataList:function(){var t=this;this.loading=!0,this.$api.getGuideList({page:this.page,limit:this.limit,times:this.times,shopname:this.shopname,status:this.status,gtype:this.gtype,username:this.username,city:this.city}).then(function(e){t.dataList=e.data||[],t.height=100;var i=e.data.total;i>=10?t.height=600:0!=i&&(t.height=700*i),e.code&&t.$message[e.code?"warning":"success"](e.data),t.loading=!1})},handleSizeChange:function(t){this.limit=t,this.getDataList()},handleCurrentChange:function(t){this.page=t,this.getDataList()},search:function(){this.page=1,this.getDataList(),this.isShow=!0},back:function(){this.page=1,this.limit=10,this.times="",this.shopname="",this.status=1,this.gtype="0",this.username="",this.city="",this.getDataList(),this.isShow=!1},userStop:function(t){var e=this;this.$confirm("确认进行该项操作吗?","提示",{type:"warning"}).then(function(){e.$api.guideStop({uid:t}).then(function(t){e.$message[t.code?"warning":"success"](t.data),e.getDataList()})}).catch(function(){e.$message.info("已取消操作")})},getPunishType:function(){var t=this;this.$api.getPunishType().then(function(e){t.punishList=e.data})},openPunishDialog:function(t){this.getPunishType(),this.punishId=t.id,this.punishDialog=!0},punishSure:function(){var t=this;if(!this.punishType||!this.punishContent)return this.$message.warning("请处罚类型和处罚内容");this.$api.addPunish({to_uid:this.punishId,types:this.punishType,values:this.punishContent}).then(function(e){t.$message[e.code?"warning":"success"](e.data.message),t.punishDialog=!!e.code})},tabClick:function(t){this.utype=t.name,this.page=1,this.getDataList()},refund:function(t){var e=this;return null==t?this.$message.error("无法给该专引师退款，order_id为空，不存在专引师支付订单"):1!=JSON.parse(localStorage.getItem("userinfo")).id?this.$message.error("当前登录用户没有权限退款"):void this.$confirm("确定要给该用户退款吗？").then(function(i){e.$api.setRefund({order_id:t,type:"GUIDE"}).then(function(t){e.message[t.code?"warning":"success"](t.data.message)})}).catch(function(t){})}},created:function(){this.getDataList()}}),l=s,o=(i("cf28"),i("2877")),r=Object(o["a"])(l,n,a,!1,null,"445a35a4",null);e["default"]=r.exports},be59:function(t,e,i){},cf28:function(t,e,i){"use strict";var n=i("be59"),a=i.n(n);a.a}}]);
//# sourceMappingURL=teacher.f9a5c888.js.map